<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, Starfly" />










<meta property="og:type" content="website">
<meta property="og:title" content="Starfly&#39;s blog">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Starfly&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Starfly">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/3/"/>





  <title>Starfly's blog</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Starfly's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/24/CS61b-SLLists/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/24/CS61b-SLLists/" itemprop="url">CS61b-SLLists</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-24T02:43:29+08:00">
                2020-02-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="sllists"> SLLists</span><a href="#sllists" class="header-anchor"> </a></h2>
<p>In practice, <em>IntList</em> suffers from the fact that it is fairly awkward to use, resulting in code that is hard to read and maintain.</p>
<p>Fundamentally, the issue is that the <em>IntList</em> a <strong>naked recursive</strong> data structure.</p>
<p>We now build a new class <em>SLList</em>, which much more closely resembles the list implementations that programmers use in mordern languages. We’ll do so by iteratively adding a sequence of improvements.</p>
<h3><span id="improvement-1-rebranding"> Improvement 1: Rebranding</span><a href="#improvement-1-rebranding" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IntList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> first;</span><br><span class="line">    <span class="keyword">public</span> IntList rest;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IntList</span><span class="params">(<span class="keyword">int</span> f, IntList r)</span> </span>&#123;</span><br><span class="line">        first = f;</span><br><span class="line">        rest = r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>While functional, “naked” linked lists like the one above are hard to use.</p>
<ul>
<li>Users of this class are probably going to need to know references very well, and be able to think recursively. Let’s make our users’ lives easier.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IntNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> item;</span><br><span class="line">    <span class="keyword">public</span> IntNode next;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IntNode</span><span class="params">(<span class="keyword">int</span> i, IntNode n)</span> </span>&#123;</span><br><span class="line">        item = i;</span><br><span class="line">        next = n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="improvement-2-bureaucracy"> Improvement 2: Bureaucracy</span><a href="#improvement-2-bureaucracy" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** An SLList is a list of integers, which hides the terrible truth of the nakedness within.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SLList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> IntNode first;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SLList</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        first = <span class="keyword">new</span> IntNode(x, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/* Creates a list of interger, namely 10*/</span></span><br><span class="line">        SLList L = <span class="keyword">new</span> SLList(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Already, we can get a vague sense of why a <em>SLList</em> is better. Compare the creation of an <em>IntList</em> of one item to the creation of a <em>SLList</em> of one item.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IntList L1 = <span class="keyword">new</span> IntList(<span class="number">5</span>, <span class="keyword">null</span>);</span><br><span class="line">SLList L2 = <span class="keyword">new</span> SLList(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<p>The <em>SLList</em> hides the detail that there exists a null link from the user. The <em>SLList</em> class isn’t very useful yet, so let’s add an <em>addFirst</em> and <em>getFirst</em> method as simple warmup methods.</p>
<h3><span id="addfirst-and-getfirst"> addFirst and getFirst</span><a href="#addfirst-and-getfirst" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** An SLList is a list of integers, which hides the terrible truth of the nakedness within.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SLList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> IntNode first;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SLList</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        first = <span class="keyword">new</span> IntNode(x, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds x to the front of this IntList. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        first = <span class="keyword">new</span> IntNode(x, first);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the first item in the list. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> first.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/* Creates a list of interger, namely 10*/</span></span><br><span class="line">        SLList L = <span class="keyword">new</span> SLList(<span class="number">10</span>);</span><br><span class="line">        L.addFirst(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">int</span> x = L.getFirst();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>IntLists vs. SLLists</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SLList L = <span class="keyword">new</span> SLList(<span class="number">15</span>);</span><br><span class="line">L.addFirst(<span class="number">10</span>);</span><br><span class="line">L.addFirst(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">int</span> x = L.getFirst();</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IntList L = <span class="keyword">new</span> IntList(<span class="number">15</span>, <span class="keyword">null</span>);</span><br><span class="line">L = <span class="keyword">new</span> IntList(L, <span class="number">10</span>);</span><br><span class="line">L = <span class="keyword">new</span> IntList(L, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">int</span> x = L.first;</span><br></pre></td></tr></table></figure>
<p>While functional, “naked” linked lists like the <em>IntList</em> class are hard to use.</p>
<ul>
<li>Users of <em>IntList</em> are need to know Java references well, and be able to think recursively.</li>
<li><em>SLList</em> is much simpler to use. Simply use the provided methods.</li>
</ul>
<p>Essentially, the <em>SLList</em> class acts as a middleman between the list user and the naked recursive data structure.</p>
<h3><span id="improvement-3-public-vs-private"> Improvement 3: Public vs. Private</span><a href="#improvement-3-public-vs-private" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** An SLList is a list of integers, which hides the terrible truth of the nakedness within.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SLList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> IntNode first;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Why Restrict Access?</strong><br>
Hide implementation details from users of your class.</p>
<ul>
<li>Less for user of class to understand.</li>
<li>Safe for you to change private methods (implementaion).</li>
</ul>
<p>Car analogy:</p>
<ul>
<li>Public: Pedals, Steering Wheel</li>
<li>Private: Fuel line, Rotary valve</li>
</ul>
<p>In large software engineering projects, the <em>private</em> keyword is an invaluable signal that certain pieces of code should be ignored (and thus need not to be understood) by the end user. Likewise, the <em>public</em> keyword should be thought of as a declaration that a method is available and will work forever exactly as it does now.</p>
<h3><span id="improvement-4-nested-classes"> Improvement 4: Nested Classes</span><a href="#improvement-4-nested-classes" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** An SLList is a list of integers, which hides the terrible truth of the nakedness within.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SLList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> item;</span><br><span class="line">        <span class="keyword">public</span> IntNode next;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">IntNode</span><span class="params">(<span class="keyword">int</span> i, IntNode n)</span> </span>&#123;</span><br><span class="line">            item = i;</span><br><span class="line">            next = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IntNode first;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Why Nested Classes?</strong><br>
Nested Classes are useful when a class doesn’t stand on its own and is obviously subordinate to another class.</p>
<ul>
<li>Make the nested class private if other classes should never use the nested class.</li>
</ul>
<p>In my opinion, probably makes senses to make <em>IntNode</em> a nested private class.</p>
<ul>
<li>Hard to imagine other classes having a need to manipulate <em>IntNodes</em>.</li>
</ul>
<h3><span id="addlast-and-size"> addLast() and size()</span><a href="#addlast-and-size" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Adds an item to the end of the list*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    IntList p = first;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Move p until it reaches the end of list. */</span></span><br><span class="line">    <span class="keyword">while</span> (p.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p.next = <span class="keyword">new</span> IntNode(x, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Returns the size of the list that starts at IntNode p. */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">(IntNode p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + size(p.next);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> size(first);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="improvement-5-caching"> Improvement 5. Caching</span><a href="#improvement-5-caching" class="header-anchor"> </a></h3>
<p>Goal: Modify SLList so that the execution time of <em>size()</em> is always fast(i.e. independent of the size of the list).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** An SLList is a list of integers, which hides the terrible truth of the nakedness within.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SLList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> item;</span><br><span class="line">        <span class="keyword">public</span> IntNode next;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">IntNode</span><span class="params">(<span class="keyword">int</span> i, IntNode n)</span> </span>&#123;</span><br><span class="line">            item = i;</span><br><span class="line">            next = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> IntNode first;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SLList</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        first = <span class="keyword">new</span> IntNode(x, <span class="keyword">null</span>);</span><br><span class="line">        size = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds x to the front of this IntList. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        first = <span class="keyword">new</span> IntNode(x, first);</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the first item in the list. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> first.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item to the end of the list*/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        IntList p = first;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* Move p until it reaches the end of list. */</span></span><br><span class="line">        <span class="keyword">while</span> (p.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        p.next = <span class="keyword">new</span> IntNode(x, <span class="keyword">null</span>);</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Solution: Maintain a special size variable that <strong>caches</strong> the size of the list.</p>
<ul>
<li>Caching: putting aside data to speed up retrieval.</li>
</ul>
<p>TANSTAAFL: There aren’t no such thing as a free lunch.</p>
<ul>
<li>But spreading the work over each add call is a new win in almost any circumstance.</li>
</ul>
<h3><span id="improvement-6a-the-empty-list"> Improvement 6a: The Empty List</span><a href="#improvement-6a-the-empty-list" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** An SLList is a list of integers, which hides the terrible truth of the nakedness within.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SLList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> item;</span><br><span class="line">        <span class="keyword">public</span> IntNode next;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">IntNode</span><span class="params">(<span class="keyword">int</span> i, IntNode n)</span> </span>&#123;</span><br><span class="line">            item = i;</span><br><span class="line">            next = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> IntNode first;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SLList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        first = <span class="keyword">null</span>;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SLList</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        first = <span class="keyword">new</span> IntNode(x, <span class="keyword">null</span>);</span><br><span class="line">        size = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">/** Adds an item to the end of the list*/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        IntList p = first;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* Move p until it reaches the end of list. */</span></span><br><span class="line">        <span class="keyword">while</span> (p.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        p.next = <span class="keyword">new</span> IntNode(x, <span class="keyword">null</span>);</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>But now, the method <em>addLast()</em> has a nullPointerException bug when first == null.</p>
<h3><span id="improvement-6b-sentinel-nodes"> Improvement 6b: Sentinel Nodes</span><a href="#improvement-6b-sentinel-nodes" class="header-anchor"> </a></h3>
<p>We can fix by using <em>if</em> syntax, but that’s a little bit ugly:</p>
<ul>
<li>Requires a special case.</li>
<li>More complex data structures will have many more special cases.</li>
</ul>
<p>The fundamental problem:</p>
<ul>
<li>The empty list has a null <em>first</em>. Can’t access <em>first.next</em>.<br>
How can we avoid special cases?</li>
<li>Make all <em>SLLists</em> (even empty) the ‘same’.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** An SLList is a list of integers, which hides the terrible truth of the nakedness within.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SLList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> item;</span><br><span class="line">        <span class="keyword">public</span> IntNode next;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">IntNode</span><span class="params">(<span class="keyword">int</span> i, IntNode n)</span> </span>&#123;</span><br><span class="line">            item = i;</span><br><span class="line">            next = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* The first item (if it exists) is at sentinel.next) */</span></span><br><span class="line">    <span class="keyword">public</span> IntNode sentinel;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SLList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        sentinel = <span class="keyword">new</span> IntNode(<span class="number">63</span>, <span class="keyword">null</span>);</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SLList</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        SLList();</span><br><span class="line">        sentinel.next = <span class="keyword">new</span> IntNode(x, <span class="keyword">null</span>);</span><br><span class="line">        size = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds x to the front of this IntList. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        sentinel.next = <span class="keyword">new</span> IntNode(x, sentinel.next);</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the first item in the list. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sentinel.next.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item to the end of the list*/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        IntList p = sentinel;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* Move p until it reaches the end of list. */</span></span><br><span class="line">        <span class="keyword">while</span> (p.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        p.next = <span class="keyword">new</span> IntNode(x, <span class="keyword">null</span>);</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Notes:</p>
<ul>
<li>Rename first to be sentinel.</li>
<li>Sentinel is never null, always points to sentinel node.</li>
<li>Sentinel node’s item needs to be some integer, but doesn’t matter what value we pick.</li>
<li>Had to fix constructors and methods to be compatible with sentinel nodes.</li>
</ul>
<p>Bottom line: Having a sentinel simplifies our addLast method.</p>
<ul>
<li>No need for a special case to check if sentinel is <em>null</em>(since it is never <em>null</em>).</li>
</ul>
<h3><span id="invariants"> Invariants</span><a href="#invariants" class="header-anchor"> </a></h3>
<p>An invariants is a condition that is guaranteed to be true during code execuation (assuming there are no bugs in your code).</p>
<p>An SLList with a sentinel node has at least the following invariants:</p>
<ul>
<li>The sentinel reference always points to a sentinel node.</li>
<li>The first node(if it exists), is always at sentinel.next.</li>
<li>The size variable is always the total number of items that have been added.</li>
</ul>
<p>Invariants makeit easier to reason about code:</p>
<ul>
<li>Can assume they are true to simplify code (e.g. addLast doesn’t need to worry about nulls).</li>
<li>Must ensure that methods preserve invariants.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/22/CS61b-Lists/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/22/CS61b-Lists/" itemprop="url">CS61b-Lists</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-22T09:04:19+08:00">
                2020-02-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="the-mystery-of-the-walrus"> The Mystery of the Walrus</span><a href="#the-mystery-of-the-walrus" class="header-anchor"> </a></h2>
<h3><span id="two-examples"> Two examples</span><a href="#two-examples" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Walrus a = <span class="keyword">new</span> Walrus(<span class="number">1000</span>, <span class="number">8.3</span>);</span><br><span class="line">Walrus b;</span><br><span class="line">b = a;</span><br><span class="line">b.weight = <span class="number">5</span>;</span><br><span class="line">System.out.println(a); <span class="comment">// 5</span></span><br><span class="line">System.out.println(b); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> y;</span><br><span class="line">y = x;</span><br><span class="line">x = <span class="number">2</span>;</span><br><span class="line">System.out.println(x); <span class="comment">// 2</span></span><br><span class="line">System.out.println(y); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h4><span id="bits"> Bits</span><a href="#bits" class="header-anchor"> </a></h4>
<p>Your computer stores information in “memory”.</p>
<ul>
<li>Information is stored in memory as a sequence of ones and zeros.<br>
– Example: 72 stored as 01001000<br>
– Example: The letter H stored as 01001000 (same as the number 72)<br>
– Example: True stored as 00000001</li>
</ul>
<p>Each Java type has a different way to interpret the bits:</p>
<ul>
<li>8 primitive types in Java: byte, short, <strong>int</strong>, long, float, <strong>double</strong>, boolean, char</li>
</ul>
<h4><span id="declaring-a-variable"> Declaring a Variable</span><a href="#declaring-a-variable" class="header-anchor"> </a></h4>
<p>When you declare a variable of a certain type in Java:</p>
<ul>
<li>Your computer set aside exactly enough bits to hold a thing of that type.</li>
<li>Java creates an internal table that maps each variable name to the location of the first bit in box.</li>
<li>Java does NOT write anything into the reserved boxes.<br>
– For safety, Java will not let access a variable that is uninitialized.</li>
</ul>
<p><strong>Remark.</strong></p>
<ul>
<li>Java language provides no way for you to know the location of the box. In other words, the exact memory address is below the level of abstraction accessible to us in Java.</li>
</ul>
<p><strong>Pros and Cons.</strong><br>
It gives programmer less control which prevents programmer from doing certain types of optimizations. However, it also provides a large class of very tricky programming errors.</p>
<h4><span id="simplified-box-notation"> Simplified Box Notation</span><a href="#simplified-box-notation" class="header-anchor"> </a></h4>
<p>We’ll use simplified box notation from here on out:</p>
<ul>
<li>Instead of writing memory box contents in binary, we’ll write them in human readable symbols.</li>
</ul>
<h4><span id="the-golden-rule-of-equals-groe"> The Golden Rule of Equals (GRoE)</span><a href="#the-golden-rule-of-equals-groe" class="header-anchor"> </a></h4>
<p>Given variables y = x:</p>
<ul>
<li>y = x copies all the bits from x into y.</li>
</ul>
<h3><span id="reference-types"> Reference Types</span><a href="#reference-types" class="header-anchor"> </a></h3>
<p>Above, we have 8 primitive types. Everything else, including arrays, is not a primitive type but rather a <em>reference type</em>.</p>
<h4><span id="class-instantiations"> Class Instantiations</span><a href="#class-instantiations" class="header-anchor"> </a></h4>
<p>When we instantiate an Object (e.g. Dog, Walrus, Planet):</p>
<ul>
<li>Java first allocates a box of bits for each instance of the class and fills them with a default value.(e.g. 0, null)</li>
<li>The constructor then usually fills every such box with some other value.</li>
</ul>
<p>Can think of new as returning the address of the newly created object.</p>
<ul>
<li>Addresses in Java are 64 bits.</li>
<li>Example (rough picture): If object is created in memory location 2384723423, then new returns 2384723423.</li>
</ul>
<h4><span id="reference-type-variable-declarations"> Reference Type variable Declarations</span><a href="#reference-type-variable-declarations" class="header-anchor"> </a></h4>
<p>When we declare a variable of any reference type:</p>
<ul>
<li>Java allocates exactly a box of size 64 bits, no matter what type of object.</li>
<li>These bits can be either set to:<br>
– Null(all zeros)<br>
– The 64 bit “address” of a specific instance of that class (returned by new)</li>
</ul>
<p><img src="/2020/02/22/CS61b-Lists/Walrus.jpg" alt></p>
<p>The 64-bit addresses are meaningless to us as humans, so we’ll represent:</p>
<ul>
<li>All zeros addresses with “null”.</li>
<li>Non-zero addresses as arrows.</li>
</ul>
<p>This is sometimes called “box and pointer” notation.</p>
<h4><span id="reference-types-obey-the-golden-rule-of-equals"> Reference Types Obey the Golden Rule of Equals</span><a href="#reference-types-obey-the-golden-rule-of-equals" class="header-anchor"> </a></h4>
<p>Just as with primitive types, the equals sign copies the bits.</p>
<ul>
<li>In terms of our visual metaphor, we “copy” the arrow by making the arrow in the b box point as the same instance as a.</li>
</ul>
<h3><span id="parameter-passing"> Parameter Passing</span><a href="#parameter-passing" class="header-anchor"> </a></h3>
<h4><span id="the-golden-rule-of-equals-and-parameter-passing"> The Golden Rule of Equals (and Parameter Passing)</span><a href="#the-golden-rule-of-equals-and-parameter-passing" class="header-anchor"> </a></h4>
<p>Given variables b and a:</p>
<ul>
<li>b = a copies all the bits from a into b.</li>
</ul>
<p>Passing parameters obeys the same rule: Simply copy the bits to the new scope.</p>
<h4><span id="the-golden-rule-summary"> The Golden Rule: Summary</span><a href="#the-golden-rule-summary" class="header-anchor"> </a></h4>
<p>There are 9 types of variables in Java:</p>
<ul>
<li>8 primitive types (byte, short, int, long, float, double, boolean, char).</li>
<li>The 9th type is references to Objects (an arrow). References may be null.</li>
</ul>
<p>In box-and-pointer notation, each variable is drawn as a labeled box and values are shown in the box.</p>
<ul>
<li>Addresses are represented by arrows to object instances.</li>
</ul>
<p>The golden rule:</p>
<ul>
<li>b = a copies the bits from a into b.</li>
<li>Passing parameters copies the bits.</li>
</ul>
<h3><span id="instantiation-of-arrays"> Instantiation of Arrays</span><a href="#instantiation-of-arrays" class="header-anchor"> </a></h3>
<h4><span id="declaration-and-instantiation-of-arrays"> Declaration and instantiation of Arrays</span><a href="#declaration-and-instantiation-of-arrays" class="header-anchor"> </a></h4>
<p>Arrays are also Objects. As we’ve seen, objects are (usually) instantiated using the <em>new</em> keyword.</p>
<p>int[] a;</p>
<ul>
<li>Declaration creates a 64 bit box intended only for storing a reference to an int array. <strong>No object is instantiated.</strong></li>
</ul>
<p>new int[]{0, 1, 2, 95, 4};</p>
<ul>
<li>instantiates a new Object, in this case an int array.</li>
<li>Object is anonymous!(匿名的)</li>
</ul>
<h4><span id="assignment-of-arrays"> Assignment of Arrays</span><a href="#assignment-of-arrays" class="header-anchor"> </a></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">95</span>, <span class="number">4</span>&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>Creates a 64 bit box for storing an int array address. (declaration)</li>
<li>Creates a new Object, in this case an int array. (instantiation)</li>
<li>Puts the address of this new Object into the 64 bit box named a. (assignment)</li>
</ul>
<p>Note: Instantiated objects can be lost!</p>
<ul>
<li>If we were to reassign a to something else, we’d never be able to get the original Object back!</li>
</ul>
<h3><span id="intlists"> IntLists</span><a href="#intlists" class="header-anchor"> </a></h3>
<p>Let’s define an IntList as an object containing two memeber variables:</p>
<ul>
<li>int first;</li>
<li>IntList rest;</li>
</ul>
<p>And define two versions of the same method:</p>
<ul>
<li>size()</li>
<li>iterativeSize()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IntList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> first;</span><br><span class="line">    <span class="keyword">public</span> IntList rest;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(IntList l, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        l = <span class="keyword">new</span> IntList(x, l);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IntList</span><span class="params">(<span class="keyword">int</span> f, IntList r)</span> </span>&#123;</span><br><span class="line">        first = f;</span><br><span class="line">        rest = r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">        Return the size of the list using recursion!</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rest == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + <span class="keyword">this</span>.rest.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">        Return the size of the list using no recursion!</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">iterativeSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        IntList p = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">int</span> totalSize = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (p != <span class="keyword">null</span>) &#123;</span><br><span class="line">            totalSize += <span class="number">1</span>;</span><br><span class="line">            p = p.rest;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> totalSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">        Returns the ith item of this IntList.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rest.get(i - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Question:</strong></p>
<ul>
<li>Why we don’t do something like <em>if (this == null) return 0;</em></li>
</ul>
<p><strong>Answer:</strong></p>
<ul>
<li>If L were null, then you would get a NullPointer error!</li>
</ul>
<p>The <em>iterativeSize</em> method is recommanded to use the name <em>p</em> to remind that the variable is holding a pointer. Need this pointer <em>p</em> because we cannot reassign “this” in Java.</p>
<p><strong>Remark.</strong></p>
<ul>
<li>Note that the method we’ve written takes linear time! That is, if you have a list that is 1,000,000 items long, then getting the last item is going to take much longer than it would if we had a small list. We’ll see an alternate way to implement a list that will avoid this problem in a future lecture.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/20/CS61b-Defining-and-Using-Classes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/20/CS61b-Defining-and-Using-Classes/" itemprop="url">CS61b: Defining and Using Classes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-20T15:19:17+08:00">
                2020-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="reading"> Reading</span><a href="#reading" class="header-anchor"> </a></h2>
<h3><span id="static-methods-vs-non-static-methods"> Static methods vs. Non-static methods</span><a href="#static-methods-vs-non-static-methods" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="comment">// instance variable. Can have as many of these as you want.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> weightInPounds; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// Constructor (similar to a method, but not a method). Determines how to instantiate the class</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">(<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">        weightInPounds = w;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Non-static method(Instance method), Idea: If the method is going to be invoked by an instance of the class, then it should be non-static</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">makeNoise</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (weightInPounds &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"yip"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weightInPounds &lt; <span class="number">30</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"bark"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"woof"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DogLauncher</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Dog d;</span><br><span class="line">        d = <span class="keyword">new</span> Dog();</span><br><span class="line">        d.weightInPounds = <span class="number">20</span>;</span><br><span class="line">        d.makeNoise();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Some key observations and terminology:</p>
<ul>
<li>An <em>Object</em> in Java is an instance of any class.</li>
<li>The <em>Dog</em> class has its own variables, also known as <em>instance variables</em> or <em>non-static</em> variables. These must be declared inside the class, unlike languages like Python or Matlab, where new variables can be added at runtime.</li>
<li>The method that we created in the <em>Dog</em> class did not hava the <em>static</em> keyword. We call such methods <em>instance</em> methods or <em>non-static</em> methods.</li>
<li>To call the <em>makeNoise</em> method, we had to first <em>instantiate</em> a <em>Dog</em> using the <em>new</em> keyword, and then make a specific <em>Dog</em> bark. In other words, we called <em>d.makeNoise()</em> instead of <em>Dog.makeNoise()</em>.</li>
<li>Once an object has been instantiated, it can be <em>assigned</em> to a <em>declared</em> variable of the appropriate type, e.g. <em>d = new Dog();</em></li>
<li>Variables and methods of a class are also called members of a class.</li>
<li>Members of a class are accessed using <em>dot</em> notation.</li>
</ul>
<h3><span id="class-methods-vs-instance-methods"> Class Methods vs. Instance Methods</span><a href="#class-methods-vs-instance-methods" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> weightInPounds; </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">(<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">        weightInPounds = w;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">makeNoise</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (weightInPounds &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"yip"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weightInPounds &lt; <span class="number">30</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"bark"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"woof"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Dog <span class="title">maxDog</span><span class="params">(Dog d1, Dog d2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (d1.weightInPounds &gt; d2.weightInPounds) &#123;</span><br><span class="line">            <span class="keyword">return</span> d1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> d2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dog <span class="title">maxDog</span><span class="params">(Dog d2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.weightInPounds &gt; d2.weightInPounds) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;   </span><br><span class="line">        <span class="keyword">return</span> d2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Java allows us to define two types of methods:</p>
<ul>
<li>Class methods, a.k.a static methods.</li>
<li>Instance methods, a.k.a non-static methods.</li>
</ul>
<p>Instance methods are actions that can be taken only by a specific instance of a class. Static methods are actions that are taken by the class itself</p>
<h3><span id="static-variables"> Static Variables</span><a href="#static-variables" class="header-anchor"> </a></h3>
<p>It is occasionally useful for classes to have static variables. These are properties inherent to the class itself, rather than the instance.</p>
<h3><span id="main-function"> main function</span><a href="#main-function" class="header-anchor"> </a></h3>
<ul>
<li>public: So far, all of our methods start with this keyword.</li>
<li>static: It is a static method, not associated with any particular instance.</li>
<li>void: It has no return type.</li>
<li>main: This is the name of the method.</li>
<li>String[] args: This is the parameter that is passed to the main method.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArgsDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(args[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This program prints out the 0th command line argument.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/20/CS61b-Intro-Hello-World-Java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/20/CS61b-Intro-Hello-World-Java/" itemprop="url">CS61b: Intro, Hello World Java</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-20T11:32:19+08:00">
                2020-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="reading"> Reading</span><a href="#reading" class="header-anchor"> </a></h2>
<h3><span id="declaring-functions"> Declaring functions</span><a href="#declaring-functions" class="header-anchor"> </a></h3>
<ul>
<li>
<p>Functions must be declared as part of a class in Java. A function that is part of a class is called a “method”. So in Java, all functions are methods.</p>
</li>
<li>
<p>To define a function in Java, we use “public static”, later more ways of defining functions.</p>
</li>
<li>
<p>All parameters of a function must have a declared type, and the return value of the function must have a declared type. Functions in Java return only one value!</p>
</li>
</ul>
<h3><span id="code-style-comments-javadoc"> Code Style, Comments, Javadoc</span><a href="#code-style-comments-javadoc" class="header-anchor"> </a></h3>
<ul>
<li>Consistent style (spacing, variable naming, brace style, etc)</li>
<li>Size (lines that are not too wide, source files that are not too long)</li>
<li>Descriptive naming (variables, functions, classes), e.g. variables or functions with names like <em>year</em> or <em>getUserName</em> instead of <em>x</em> or <em>f</em>.</li>
<li>Avoidance of repetitive code: You should almost never have two significant blocks of code that are nearly identical except for a few changes.</li>
<li>Comments where appropriate. Line comments in Java use the <em>//</em> delimiter. Block (multiline comments) comments use <em>/</em>* and **/*.</li>
</ul>
<p>The golden rule is this: Write your code so that it is easy for a stranger to understand.</p>
<h2><span id="slides"> Slides</span><a href="#slides" class="header-anchor"> </a></h2>
<h3><span id="reflections-on-static-typing"> Reflections on Static Typing</span><a href="#reflections-on-static-typing" class="header-anchor"> </a></h3>
<p><strong>Good:</strong></p>
<ul>
<li>Debugging is a lot easier, type errors are avoided.</li>
<li>Production code has no type errors, so that means people’s phones won’t be crash because of type errors.</li>
<li>Programs run more efficiently in time and memory.</li>
<li>Self documenting: YOU KNOW WHAT YOU’VE GOT.</li>
</ul>
<p><strong>Bad:</strong></p>
<ul>
<li>Code is more verbose.</li>
<li>Code is less general.</li>
</ul>
<h2><span id="lab1-setup-setting-up-your-computer"> Lab1 Setup: Setting Up Your Computer</span><a href="#lab1-setup-setting-up-your-computer" class="header-anchor"> </a></h2>
<h3><span id="learn-to-use-the-terminal"> Learn to Use the Terminal</span><a href="#learn-to-use-the-terminal" class="header-anchor"> </a></h3>
<ul>
<li>cd: change your working directory</li>
<li>pwd: present working directory</li>
<li>. means your current directory</li>
<li>… means one parent directory above your current directory</li>
<li>ls: list files/folders in current directory</li>
<li>ls -1: list all the files and folders in your current directory with timestamps and file permissions.</li>
<li>mkdir: make a directory</li>
<li>rm: remove a file</li>
<li>cp: copy a file</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp lab1&#x2F;original lab2&#x2F;duplicate</span><br></pre></td></tr></table></figure>
<p>This command will copy the <em>original</em> file in the <em>lab1</em> directory and create a <em>duplicate</em> copy in the <em>lab2</em> directory.</p>
<ul>
<li>mv: move or rename a file</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv lab1&#x2F;original lab2&#x2F;original</span><br></pre></td></tr></table></figure>
<p>This command moves <em>original</em> from <em>lab1</em> to <em>lab2</em>. Unlike <em>cp</em>, mv does not leave original in the <em>lab1</em> directory.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv lab1&#x2F;original lab1&#x2F;newname</span><br></pre></td></tr></table></figure>
<p>This command does not move the file but rather renames it from <em>original</em> to <em>newname</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/" itemprop="url">Algorithms-Part1-Balanced Search Trees</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-19T08:52:50+08:00">
                2020-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="toc">
<!-- toc -->
<ul>
<li><a href="#balanced-search-trees">Balanced search trees</a>
<ul>
<li><a href="#2-3-trees">2-3 trees</a></li>
<li><a href="#red-black-bsts">Red-black BSTs</a></li>
<li><a href="#b-trees">B-trees</a></li>
</ul>
</li>
<li><a href="#geometric-applications-of-bsts">Geometric Applications of BSTs</a>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#1d-range-search">1d range search</a></li>
<li><a href="#line-segment-intersection">Line Segment Intersection</a></li>
<li><a href="#kd-trees">Kd-trees</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
</div>
<h2><span id="balanced-search-trees"> Balanced search trees</span><a href="#balanced-search-trees" class="header-anchor"> </a></h2>
<h3><span id="2-3-trees"> 2-3 trees</span><a href="#2-3-trees" class="header-anchor"> </a></h3>
<h4><span id="basic-knowledge"> Basic knowledge</span><a href="#basic-knowledge" class="header-anchor"> </a></h4>
<p>A generalization of Binary search trees.<br>
<strong>Allow 1 or 2 keys per node.</strong></p>
<ul>
<li>2-node: one key, two children.</li>
<li>3-node: two keys, three children.</li>
</ul>
<p><strong>Perfect balance.</strong></p>
<ul>
<li>Every path from root to null link has same length.</li>
</ul>
<p><strong>Symmetric order.</strong></p>
<ul>
<li>Inorder traversal yields keys in ascending order.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/2-3trees.png" alt></p>
<h4><span id="search"> Search</span><a href="#search" class="header-anchor"> </a></h4>
<ul>
<li>Compare search key against keys in node.</li>
<li>Find interval containing search key.</li>
<li>Follow associated link(recursively).</li>
</ul>
<h4><span id="insert"> Insert</span><a href="#insert" class="header-anchor"> </a></h4>
<p><strong>Insert into a 2-node at bottom.</strong></p>
<ul>
<li>Search for key, as usual.</li>
<li>Replace 2-node with 3-node.</li>
</ul>
<p><strong>Insert into a 3-node at bottom.</strong></p>
<ul>
<li>Add new key to 3-node to create temporary 4-node.</li>
<li>Move middle key in 4-node into parent.</li>
<li>Repeat up the tree, as necessary.</li>
<li>If you reach the root and it’s a 4-node, split it into three 2-nodes.(at this time height of tree increases by one)</li>
</ul>
<h4><span id="local-tansformation-in-a-2-3-tree"> Local tansformation in a 2-3 tree</span><a href="#local-tansformation-in-a-2-3-tree" class="header-anchor"> </a></h4>
<p>Splitting a 4-node is a local tansformation: constant number of operations.</p>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/local_trans.png" alt></p>
<h4><span id="global-properties-in-a-2-3-tree"> Global properties in a 2-3 tree</span><a href="#global-properties-in-a-2-3-tree" class="header-anchor"> </a></h4>
<p><strong>Invariants.</strong></p>
<ul>
<li>Maintain symmetric order and perfect balance.</li>
</ul>
<p><strong>Pf.</strong></p>
<ul>
<li>Each tansformation maintains symmetric order and perfect balance.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/balance.png" alt></p>
<h4><span id="2-3-tree-performance"> 2-3 tree: performance</span><a href="#2-3-tree-performance" class="header-anchor"> </a></h4>
<p><strong>Tree height.</strong></p>
<ul>
<li>Worst case: $ log_2^N $ [all 2-nodes]</li>
<li>Best case: $ log_3^N $ [all 3-nodes]</li>
<li>Between 12 and 20 for a million nodes.</li>
<li>Between 18 and 30 for a billion nodes.</li>
</ul>
<p>Guaranteed logarithmic performance for search and insert.</p>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/summary1.png" alt></p>
<h4><span id="2-3-tree-implementation"> 2-3 tree: implementation?</span><a href="#2-3-tree-implementation" class="header-anchor"> </a></h4>
<p><strong>Direct implementation is complicated, because:</strong></p>
<ul>
<li>Maintaining multiple node types is cumbersome.</li>
<li>Need multiple compares to move down tree.</li>
<li>Need to move back up the tree to split 4-nodes.</li>
<li>Large number of cases for splitting.</li>
</ul>
<p><strong>Bottom line.</strong><br>
Could do it, but there’s a better way.</p>
<h3><span id="red-black-bsts"> Red-black BSTs</span><a href="#red-black-bsts" class="header-anchor"> </a></h3>
<p>Red-black trees is a much easier way to implement 2-3 trees.<br>
And we are going to focus on the version of Left-leaning red-black BSTs(Guibas-Sedgewick 1979 and Sedgewick 2007)</p>
<h4><span id="left-leaning-red-black-bsts"> Left-leaning red-black BSTs</span><a href="#left-leaning-red-black-bsts" class="header-anchor"> </a></h4>
<ul>
<li>Represent 2-3 tree as a BST.</li>
<li>Use “internal” left-leaning links as “glue” for 3-nodes.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/lrbt.png" alt></p>
<h4><span id="an-equivalent-definition"> An equivalent definition</span><a href="#an-equivalent-definition" class="header-anchor"> </a></h4>
<p><strong>A BST such that:</strong></p>
<ul>
<li>No node has two red links connected to it.</li>
<li>Every path from root to null link has the same number of black links.</li>
<li>Red links lean left.</li>
</ul>
<p><strong>Key property:</strong><br>
1-1 correspondence between 2-3 and LLRB.<br>
<img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/llrb.png" alt></p>
<h4><span id="search-implementation-for-red-black-bsts"> Search implementation for red-black BSTs</span><a href="#search-implementation-for-red-black-bsts" class="header-anchor"> </a></h4>
<p><strong>Observation.</strong></p>
<ul>
<li>Search is the same as for elementary BST (ignore color). (but runs faster because of better balance)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Val <span class="title">get</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node x = root;</span><br><span class="line">    <span class="keyword">while</span>(x != root)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">        <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>) x = x.left;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) x = x.right;</span><br><span class="line">        <span class="keyword">else</span>              <span class="keyword">return</span> x.val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Remark.</strong></p>
<ul>
<li>Most other ops(e.g., ceiling, selection) are also identical.</li>
</ul>
<h4><span id="red-black-bst-representation"> Red-black BST representation</span><a href="#red-black-bst-representation" class="header-anchor"> </a></h4>
<p>Each node is pointed to by precisely one link (from its parent), so we can encode color of links in nodes.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> RED = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> BLACK = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    Key key;</span><br><span class="line">    Value val;</span><br><span class="line">    Node left, right;</span><br><span class="line">    <span class="keyword">boolean</span> color;          <span class="comment">// color of parent link</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isRed</span><span class="params">(Node x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>; <span class="comment">// null links are black</span></span><br><span class="line">    <span class="keyword">return</span> x.color == RED;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/color.png" alt></p>
<h4><span id="elementary-red-black-bst-operations"> Elementary red-black BST operations</span><a href="#elementary-red-black-bst-operations" class="header-anchor"> </a></h4>
<p><strong>Left rotation.</strong></p>
<ul>
<li>Orient a (temporarily) right-leaning red link to lean left.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">rotateLeft</span><span class="params">(Node h)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.right)</span></span>;</span><br><span class="line">    Node x = h.right;</span><br><span class="line">    h.right = x.left;</span><br><span class="line">    x.left = h;</span><br><span class="line">    x.color = h.color;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Invariants.</strong></p>
<ul>
<li>Maintains symmetric order and perfect black balance.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/rotate1.png" alt><br>
<img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/rotate2.png" alt></p>
<p><strong>Right rotation.</strong></p>
<ul>
<li>Orient a left-leaning red link to (temporarily) lean right.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">rotateRight</span><span class="params">(Node h)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.left)</span></span>;</span><br><span class="line">    Node x = h.left;</span><br><span class="line">    h.left = x.right;</span><br><span class="line">    x.right = h;</span><br><span class="line">    x.color = h.color;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Invariants.</strong></p>
<ul>
<li>Maintains symmetric order and perfect black balance.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/rotate3.png" alt><br>
<img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/rotate4.png" alt></p>
<p><strong>Color flip.</strong></p>
<ul>
<li>Recolor tot split a (temporary) 4-node.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">flipColors</span><span class="params">(Node h)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">assert</span> !isRed(h);</span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.left)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.right)</span></span>;</span><br><span class="line"></span><br><span class="line">    h.color = RED;</span><br><span class="line">    h.left.color = BLACK;</span><br><span class="line">    h.right.color = BLACK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Invariants.</strong></p>
<ul>
<li>Maintains symmetric order and perfect black balance.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/flipb.png" alt><br>
<img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/flipa.png" alt></p>
<h4><span id="insert-in-a-llrb-tree"> Insert in a LLRB tree:</span><a href="#insert-in-a-llrb-tree" class="header-anchor"> </a></h4>
<p><strong>Basic strategy.</strong></p>
<ul>
<li>Maintain 1-1 correspondence with 2-3 trees by applying elementary red-black BST operations.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/insert1.png" alt></p>
<p><strong>Warmup 1.</strong></p>
<ul>
<li>Insert into a tree with exactly 1 node.<br>
<img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/onenode.png" alt></li>
</ul>
<p><strong>Case 1.</strong></p>
<ul>
<li>Insert into a 2-node at the bottom.<br>
– Do standard BST insert; color new link red.<br>
– If new red link is a right link, rotate left.<br>
<img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/case1.png" alt></li>
</ul>
<p><strong>Warmup 2.</strong></p>
<ul>
<li>Insert into a tree with exactly 2 nodes.<br>
<img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/warmup2.png" alt></li>
</ul>
<p><strong>Case 2.</strong></p>
<ul>
<li>Insert into a 3-node at the bottom.<br>
– Do standard BST insert; color new link red.<br>
– Rotate to balance the 4-node(if needed).<br>
– Flip colors to pass red link up one level.<br>
– Rotate to make lean left(if needed).<br>
– Repeat case 1 and case 2 up the tree(if needed).</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/case2.png" alt></p>
<h4><span id="insert-in-a-llrb-tree-java-implementation"> Insert in a LLRB tree: Java implementation</span><a href="#insert-in-a-llrb-tree-java-implementation" class="header-anchor"> </a></h4>
<p><strong>Same code handles all cases.</strong></p>
<ul>
<li>Right child red, left child black: rotate left.</li>
<li>Left child, left-left grandchild red: rotate right;</li>
<li>Both children red: flip colors.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node h, Key key, Value val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (h == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> Node(key, val, RED);  <span class="comment">// insert at bottom and color red</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(h.key);</span><br><span class="line">    <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>)  h.left = put(h.left, key, val);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)  h.right = put(h.right, key, val);</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">/* (cmp ==0)*/</span>h.val = val;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isRed(h.right) &amp;&amp; !isRed(h.left))     h = rotateLeft(h);</span><br><span class="line">    <span class="keyword">if</span> (isRed(h.left)  &amp;&amp; isRed(h.left.left)) h = rotateRight(h);</span><br><span class="line">    <span class="keyword">if</span> (isRed(h.left)  &amp;&amp; isRed(h.right))     flipColors(h);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> h; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="balance-in-llrb-trees"> Balance in LLRB trees</span><a href="#balance-in-llrb-trees" class="header-anchor"> </a></h4>
<p><strong>Proposition.</strong></p>
<ul>
<li>Height of tree is $ \leq 2log_2^N $ in the worst case.</li>
</ul>
<p><strong>Pf.</strong></p>
<ul>
<li>Every path from root to null link has same number of black links.</li>
<li>Never two red links in-a-row.</li>
</ul>
<p><strong>Property.</strong></p>
<ul>
<li>Height of tree is ~$ 1.00log_2^N $ in typical applications.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/visual.png" alt></p>
<h4><span id="st-implementations-summary"> ST implementations: summary</span><a href="#st-implementations-summary" class="header-anchor"> </a></h4>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/summary2.png" alt></p>
<h4><span id="database-implementation"> Database implementation</span><a href="#database-implementation" class="header-anchor"> </a></h4>
<ul>
<li>Red-black BST search and insert; Hibbard deletion.</li>
<li>Exceeding height limit of 80 triggered error-recovery process.</li>
</ul>
<h3><span id="b-trees"> B-trees</span><a href="#b-trees" class="header-anchor"> </a></h3>
<h4><span id="file-system-model"> File system model</span><a href="#file-system-model" class="header-anchor"> </a></h4>
<p><strong>Page.</strong></p>
<ul>
<li>Contiguous block of data (e.g., a file or 4,096-byte chunk).</li>
</ul>
<p><strong>Probe.</strong></p>
<ul>
<li>First access to a page (e.g., from disk to memory).</li>
</ul>
<p><strong>Property.</strong></p>
<ul>
<li>Time required for a probe is much larger than time to access data within a page.</li>
</ul>
<p><strong>Cost model.</strong></p>
<ul>
<li>Number of probes.</li>
</ul>
<p><strong>Goal.</strong></p>
<ul>
<li>Access data using minimum number of probes.</li>
</ul>
<h4><span id="b-trees-bayer-mccreight-1972"> B-trees (Bayer-McCreight, 1972)</span><a href="#b-trees-bayer-mccreight-1972" class="header-anchor"> </a></h4>
<p><strong>B-tree:</strong> Generalize 2-3 trees by allowing up to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">M-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> key-link pairs per node.</p>
<ul>
<li>At least 2 key-link pairs at root.</li>
<li>At least <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">M/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord">2</span></span></span></span> key-link pairs in other nodes.</li>
<li>External nodes contain client keys.</li>
<li>Internal nodes contain copies of keys to guide search.</li>
</ul>
<p><strong>Remark.</strong></p>
<ul>
<li>Choose <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span> as large as possible so that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span> links fit in a page, e.g., M = 1024</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/btree.png" alt></p>
<h4><span id="searching-in-a-b-tree"> Searching in a B-tree</span><a href="#searching-in-a-b-tree" class="header-anchor"> </a></h4>
<ul>
<li>Start at root.</li>
<li>Find interval for search key and take corresponding link.</li>
<li>Search terminates in external node.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/searchbtree.png" alt></p>
<h4><span id="insertion-in-a-b-tree"> Insertion in a B-tree</span><a href="#insertion-in-a-b-tree" class="header-anchor"> </a></h4>
<ul>
<li>Search for new key.</li>
<li>Insert at bottom.</li>
<li>Split nodes with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span> key-link pairs on the way up the tree.<br>
<img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/insertbtree.png" alt></li>
</ul>
<h4><span id="balance-in-b-tree"> Balance in B-tree</span><a href="#balance-in-b-tree" class="header-anchor"> </a></h4>
<p><strong>Proposition.</strong></p>
<ul>
<li>A search or an insertion in a B-tree of order <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> keys requires between <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow><mi>M</mi><mo>−</mo><mn>1</mn></mrow></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">log_{M-1}N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">log_{M/2}N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04964em;vertical-align:-0.3551999999999999em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> probes.</li>
</ul>
<p><strong>Pf.</strong></p>
<ul>
<li>All internal nodes (besides root) have between <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">M/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord">/</span><span class="mord">2</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">M-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> links.</li>
</ul>
<p><strong>In practice.</strong></p>
<ul>
<li>Number of probes is at most 4.</li>
</ul>
<p><strong>Optimization.</strong></p>
<ul>
<li>Always keep root page in memory.</li>
</ul>
<h4><span id="balanced-trees-in-the-wild"> Balanced trees in the wild</span><a href="#balanced-trees-in-the-wild" class="header-anchor"> </a></h4>
<p><strong>Red-black trees are widely used as system symbol tables.</strong></p>
<ul>
<li>Java: java.util.TreeMap, java.util.TreeSet.</li>
<li>C++ STL: map, multimap, multiset.</li>
<li>Linux kernal: completely fair scheduler, linux/rbtree.h.</li>
<li>Emacs: conservative stack scanning.</li>
</ul>
<p><strong>B-tree variants.</strong></p>
<ul>
<li>B+ tree, B* tree, B# tree.</li>
</ul>
<p><strong>B-trees (and variants) are widely used for file systems and databases.</strong></p>
<ul>
<li>Windows: NTFS.</li>
<li>Mac: HFS, HFS+.</li>
<li>Linux: ReiserFS, XFS, Ext3FS, JFS.</li>
<li>Databases: ORACLE, DB2, INGRES, SQL, PostgreSQL.</li>
</ul>
<h2><span id="geometric-applications-of-bsts"> Geometric Applications of BSTs</span><a href="#geometric-applications-of-bsts" class="header-anchor"> </a></h2>
<h3><span id="overview"> Overview</span><a href="#overview" class="header-anchor"> </a></h3>
<p><strong>This lecture.</strong></p>
<ul>
<li>Intersections among geometric objects.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/1d.png" alt></p>
<p><strong>Applications.</strong></p>
<ul>
<li>CAD, games, movies, virtual reality, databases,…</li>
</ul>
<p><strong>Efficient solutions.</strong></p>
<ul>
<li>Binary search trees (and extensions).</li>
</ul>
<h3><span id="1d-range-search"> 1d range search</span><a href="#1d-range-search" class="header-anchor"> </a></h3>
<p><strong>Extension of ordered symbol table.</strong></p>
<ul>
<li>Insert key-value pair.</li>
<li>Search for key k.</li>
<li>Delete key k.</li>
<li>Range search: find all keys between <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>k</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">k_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>k</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">k_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</li>
<li>Range count: number of keys between <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>k</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">k_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>k</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">k_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</li>
</ul>
<p><strong>Application.</strong> Database queries.</p>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/demo.png" alt></p>
<p><strong>Geometric interpretation.</strong></p>
<ul>
<li>Keys are point on a line.</li>
<li>Find/count points in a given 1d interval.</li>
</ul>
<h4><span id="1d-range-count"> 1d range count</span><a href="#1d-range-count" class="header-anchor"> </a></h4>
<p><strong>Unordered array.</strong></p>
<ul>
<li>Fast insert, slow range search.</li>
</ul>
<p><strong>Ordered array.</strong></p>
<ul>
<li>Slow insert, binary search for <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>k</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">k_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>k</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">k_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> to do range search.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/goal.png" alt></p>
<p><strong>BST implementation.</strong><br>
How many keys between <em>lo</em> and <em>high</em> ?</p>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/rank.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">(Key lo, Key hi)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (contains(hi)) <span class="keyword">return</span> rank(hi) - rank(lo) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span>              <span class="keyword">return</span> rank(hi) - rank(lo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Proposition.</strong></p>
<ul>
<li>Running time proportional to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">logN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span></li>
</ul>
<p><strong>Pf.</strong></p>
<ul>
<li>Nodes examined = search path to <em>lo</em> + search path to <em>hi</em>.</li>
</ul>
<h4><span id="1d-range-search"> 1d range search</span><a href="#1d-range-search" class="header-anchor"> </a></h4>
<p><strong>Find all keys between lo and hi.</strong></p>
<ul>
<li>Recursively find all keys in the left subtree (if any could fall in range).</li>
<li>Check key in current node.</li>
<li>Recursively find all keys in right subtree (if any could fall in range).</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/1dsearch.png" alt></p>
<p><strong>Proposition.</strong></p>
<ul>
<li>Running time proportional to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">R + log N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span>.</li>
</ul>
<h3><span id="line-segment-intersection"> Line Segment Intersection</span><a href="#line-segment-intersection" class="header-anchor"> </a></h3>
<h4><span id="orthogonal-line-segment-intersection-search"> Orthogonal line segment intersection search</span><a href="#orthogonal-line-segment-intersection-search" class="header-anchor"> </a></h4>
<p>Given <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> horizontal and vertical line segments, find all intersections.</p>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/ortho.png" alt></p>
<p><strong>Quadratic algorithm.</strong></p>
<ul>
<li>Check all pairs of line segments for intersection.</li>
</ul>
<p><strong>Nondegeneracy assumption.</strong></p>
<ul>
<li>All x-and y-coordinates are distinct.</li>
</ul>
<h4><span id="sweep-line-algorithm"> Sweep-line algorithm</span><a href="#sweep-line-algorithm" class="header-anchor"> </a></h4>
<p><strong>Sweep vertical line from left to right.</strong></p>
<ul>
<li>x-coordinates define events.</li>
<li>h-segment (left point): insert y-coordinate into BST.</li>
<li>h-segment (right point): remove y-coordinate from BST.</li>
<li>v-segment: range search for interval of y-endpoints.</li>
</ul>
<h4><span id="sweep-line-analysis"> Sweep-line analysis</span><a href="#sweep-line-analysis" class="header-anchor"> </a></h4>
<p><strong>Proposition.</strong><br>
The sweep-line algorithm takes time proportional to $ NlogN + R $ to find all <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span> intersections among <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> orthogonal line segments.</p>
<p><strong>Pf.</strong></p>
<ul>
<li>Put x-coordinates on a PQ (or sort). -&gt; <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">NlogN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span></li>
<li>Insert y-coordinates into BST. -&gt; <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">NlogN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span></li>
<li>Delete y-coordinates from BSt. -&gt; <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">NlogN</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span></li>
<li>Range searches in BST. -&gt; <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo>+</mo><mi>R</mi></mrow><annotation encoding="application/x-tex">NlogN + R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span></li>
</ul>
<p><strong>Bottom line.</strong></p>
<ul>
<li>Sweep line reduces 2d orthogonal line segment intersection search to 1d range search.</li>
</ul>
<h3><span id="kd-trees"> Kd-trees</span><a href="#kd-trees" class="header-anchor"> </a></h3>
<h4><span id="2-d-orthogonal-range-search"> 2-d orthogonal range search</span><a href="#2-d-orthogonal-range-search" class="header-anchor"> </a></h4>
<p><strong>Extension of ordered symbol-table to 2d keys</strong></p>
<ul>
<li>Insert a 2d key.</li>
<li>Delete a 2d key.</li>
<li>Search for a 2d key.</li>
<li>Range search: find all keys that lie in a 2d range.</li>
<li>Range count: number of keys that lie in a 2d range.</li>
</ul>
<p><strong>Geometric interpretation.</strong></p>
<ul>
<li>Keys are point in the plane.</li>
<li>Find/count points in a given h-v rectangle.</li>
</ul>
<p><strong>Applications.</strong></p>
<ul>
<li>Networking, circuit design, databases.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/kd.png" alt></p>
<h4><span id="grid-implementation"> Grid implementation</span><a href="#grid-implementation" class="header-anchor"> </a></h4>
<ul>
<li>Divide space into M-by-M grid of squares.</li>
<li>Create list of points contained in each square.</li>
<li>Use 2d array to directly index relevant square.</li>
<li>Insert: add (x,y) to list for corresponding square.</li>
<li>Range search: examine only squares that intersect 2d range query.</li>
</ul>
<h4><span id="grid-implementation-analysis"> Grid implementation analysis</span><a href="#grid-implementation-analysis" class="header-anchor"> </a></h4>
<p><strong>Space-time tradeoff.</strong></p>
<ul>
<li>Space: $ M^2 + N $.</li>
<li>Time: $ 1 + N/M^2 $ per square examined, on average.</li>
</ul>
<p><strong>Choose grid square size to tune performance.</strong></p>
<ul>
<li>Too small: wastes space.</li>
<li>Too large: too many points per square.</li>
<li>Rule of thumb: $ \sqrt{N} by \sqrt{N} grid $</li>
</ul>
<p><strong>Running time.</strong> [if points are evenly distributed]</p>
<ul>
<li>Initialize data structure: $ N $.</li>
<li>Insert point: 1.</li>
<li>Range search: 1 per point in range.</li>
</ul>
<h4><span id="clustering"> Clustering</span><a href="#clustering" class="header-anchor"> </a></h4>
<p><strong>Grid implementation.</strong></p>
<ul>
<li>Fast, simple solution for evenly-distributed points.</li>
</ul>
<p><strong>Problem.</strong> Clustering a well-known phenomenon in geometric data.</p>
<ul>
<li>Lists are too long, even though average length is short.</li>
<li>Need data structure that adapts gracefully to data.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/cluster.png" alt></p>
<h4><span id="space-patitioning-trees"> Space-patitioning trees</span><a href="#space-patitioning-trees" class="header-anchor"> </a></h4>
<p>Use a tree to represent a recursive subdivision of 2d space.</p>
<p><strong>Grid.</strong></p>
<ul>
<li>Divide space uniformly into squares.</li>
</ul>
<p><strong>2d tree.</strong></p>
<ul>
<li>Recursively divide space into two halfplanes.</li>
</ul>
<p><strong>Quadtree.</strong></p>
<ul>
<li>Recursively divide space into four quadrants.</li>
</ul>
<p><strong>BSP tree.</strong></p>
<ul>
<li>Recursively divide space into two regions.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/trees.png" alt></p>
<h4><span id="space-partitioning-trees-applications"> Space-partitioning trees: applications</span><a href="#space-partitioning-trees-applications" class="header-anchor"> </a></h4>
<ul>
<li>Ray tracing.</li>
<li>2d range search.</li>
<li>Flight simulators.</li>
<li>N-body simulation.</li>
<li>Collision detection.</li>
<li>Astronomical databases.</li>
<li>Nearest neighbor search.</li>
<li>Adaptive mesh generation.</li>
<li>Acceleraete rendering in Doom.</li>
<li>Hidden surface removal and shadow casting.</li>
</ul>
<h4><span id="2d-tree-construction"> 2d tree construction</span><a href="#2d-tree-construction" class="header-anchor"> </a></h4>
<p>Recursively partition plane into two halfplanes.</p>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/graph.png" alt></p>
<h4><span id="2d-tree-implementation"> 2d tree implementation</span><a href="#2d-tree-implementation" class="header-anchor"> </a></h4>
<p><strong>Data structure.</strong> BST, but alternate using x- and y- coordinates as key.</p>
<ul>
<li>Search gives rectangle containing point.</li>
<li>Insert further subdivides the plane.</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/how.png" alt></p>
<h4><span id="range-search-in-a-2d-tree"> Range search in a 2d tree</span><a href="#range-search-in-a-2d-tree" class="header-anchor"> </a></h4>
<p><strong>Goal.</strong> Find all points in a query axis-aligned rectangle.</p>
<ul>
<li>Check if point in nodes lies in given rectangle.</li>
<li>Recursively search left/bottom (if any could fall in rectangle).</li>
<li>Recursively search right/top (if any could fall in rectangle).</li>
</ul>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/demokd.png" alt></p>
<h4><span id="range-search-in-a-2d-tree-analysis"> Range search in a 2d tree analysis</span><a href="#range-search-in-a-2d-tree-analysis" class="header-anchor"> </a></h4>
<p><strong>Typical case.</strong></p>
<ul>
<li>$ R + logN $</li>
</ul>
<p><strong>Worst case.(assuming tree is balanced)</strong></p>
<ul>
<li>$ R + \sqrt{N} $</li>
</ul>
<h4><span id="nearest-neighbor-search-in-a-2d-tree-demo"> Nearest neighbor search in a 2d tree demo</span><a href="#nearest-neighbor-search-in-a-2d-tree-demo" class="header-anchor"> </a></h4>
<ul>
<li>Check distance from point in node to query point/</li>
<li>Recursively search left/bottom (if it could contain a closer point).</li>
<li>Recursively search right/top (if it could contain a closert point).</li>
<li>Organize method so that it begins by searching for query point.</li>
</ul>
<h4><span id="nearest-neighbor-search-in-a-2d-tree-analysis"> Nearest neighbor search in a 2d tree analysis</span><a href="#nearest-neighbor-search-in-a-2d-tree-analysis" class="header-anchor"> </a></h4>
<p><strong>Typical case.</strong></p>
<ul>
<li>$ logN $</li>
</ul>
<p><strong>Worst case (even if tree is balanced).</strong></p>
<ul>
<li>$ N $</li>
</ul>
<h4><span id="kd-tree"> Kd tree</span><a href="#kd-tree" class="header-anchor"> </a></h4>
<p>Recursively partition k-dimensional space into 2 halfspaces.</p>
<p><img src="/2020/02/19/Algorithms-Part1-Balanced-Search-Trees/kdtree.png" alt></p>
<p><strong>Efficient, simple data structure for processing k-dimensional data.</strong></p>
<ul>
<li>Widely used.</li>
<li>Adapts well to high-dimensional and clustered data.</li>
<li>Discovered by an undergrad in an algorithms class!</li>
</ul>
<h4><span id="n-body-simulation"> N-body simulation</span><a href="#n-body-simulation" class="header-anchor"> </a></h4>
<p><strong>Goal.</strong></p>
<ul>
<li>Simulate the motion of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> particles, mutually affected by gravity.</li>
</ul>
<p><strong>Brute force.</strong></p>
<ul>
<li>For each pair of particles, compute force: $ F = \frac{Gm_1m_2}{r^2} $</li>
</ul>
<p><strong>Key idea.</strong> Suppose particle is far, far away from cluster of particles.</p>
<ul>
<li>Treat cluster of particles as a single aggregate particle.</li>
<li>Compute force between particle and center of mass of aggregate.</li>
</ul>
<p><strong>Appel’s Algorithm for N-body simulation</strong></p>
<ul>
<li>Build 3d-tree with $ N $ particles as nodes.</li>
<li>Store center-of-mass of subtree in each node.</li>
<li>To compute total force acting on a particle, traverse tree, but stop as soon as distance from particle to subdivision is sufficiently large.</li>
</ul>
<p><strong>Impact.</strong></p>
<ul>
<li>Running time is $ NlogN $</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/18/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3%E4%B8%8A%E2%80%94%E2%80%94%E7%AC%AC%E5%85%AD%E8%AE%B2%EF%BC%9ATheory-of-Generalization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/18/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3%E4%B8%8A%E2%80%94%E2%80%94%E7%AC%AC%E5%85%AD%E8%AE%B2%EF%BC%9ATheory-of-Generalization/" itemprop="url">机器学习基石上——第六讲：Theory of Generalization</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-18T16:56:56+08:00">
                2020-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Machine-Learning/" itemprop="url" rel="index">
                    <span itemprop="name">Machine Learning</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

	<div class="row">
    <embed src="./Theory_of_generalization.pdf" width="100%" height="550" type="application/pdf">
	</div>



          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/17/Algorithms-Part1-Binary-Search-Trees/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/" itemprop="url">Algorithms-Part1-Binary-Search-Trees</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-17T16:40:15+08:00">
                2020-02-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="toc">
<!-- toc -->
<ul>
<li><a href="#binary-search-trees">Binary search trees</a>
<ul>
<li><a href="#basic-knowledge">Basic knowledge</a></li>
<li><a href="#bst-representation-in-java">BST representation in Java</a></li>
<li><a href="#bst-implementation">BST implementation</a></li>
<li><a href="#search-and-insert">Search and Insert</a></li>
<li><a href="#tree-shape">Tree shape</a></li>
<li><a href="#correspondence-between-bst-s-and-quicksort-partitioning">Correspondence between BST’s and quicksort partitioning</a></li>
<li><a href="#mathematical-analysis">Mathematical analysis</a></li>
<li><a href="#summary">Summary</a></li>
</ul>
</li>
<li><a href="#ordered-operations-in-bsts">Ordered Operations in BSTs</a>
<ul>
<li><a href="#minimum-and-maximum">Minimum and maximum</a></li>
<li><a href="#floor-and-ceiling">Floor and ceiling</a></li>
<li><a href="#subtree-counts">Subtree counts</a></li>
<li><a href="#rank">Rank</a></li>
<li><a href="#inorder-traversal">Inorder traversal</a></li>
</ul>
</li>
<li><a href="#deletion-in-bsts">Deletion in BSTs</a>
<ul>
<li><a href="#bst-deletion-lazy-approach">BST deletion: lazy approach</a></li>
<li><a href="#deleting-the-minimum">Deleting the minimum</a></li>
<li><a href="#hibbard-deletion">Hibbard deletion</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
</div>
<h2><span id="binary-search-trees"> Binary search trees</span><a href="#binary-search-trees" class="header-anchor"> </a></h2>
<h3><span id="basic-knowledge"> Basic knowledge</span><a href="#basic-knowledge" class="header-anchor"> </a></h3>
<p><strong>Definition</strong></p>
<ul>
<li>A BST is a <strong>binary tree</strong> in <strong>symmetric order</strong>.</li>
</ul>
<p><strong>A binary tree is either:</strong></p>
<ul>
<li>Empty.</li>
<li>Two disjoint binary trees (left and right).<br>
<img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/binary_search_trees.jpg" alt></li>
</ul>
<p><strong>Symmetric order:</strong> Each node has a key, and every node’s key is:</p>
<ul>
<li>Larger than all keys in its left subtree.</li>
<li>Smaller than all keys in its right subtree.<br>
<img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/binary_search2.jpg" alt></li>
</ul>
<h3><span id="bst-representation-in-java"> BST representation in Java</span><a href="#bst-representation-in-java" class="header-anchor"> </a></h3>
<p><strong>Java definition.</strong></p>
<ul>
<li>A BST is a reference to a root Node.</li>
</ul>
<p>A Node is comprised of four fields:</p>
<ul>
<li>A <em>Key</em> and a <em>Value</em>.</li>
<li>A reference to the left and right subtree.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Key key;</span><br><span class="line">    <span class="keyword">private</span> Value val;</span><br><span class="line">    <span class="keyword">private</span> Node left, right;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Key key, Value val)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Key and Value are generic types; Key is Comparable</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="bst-implementation"> BST implementation</span><a href="#bst-implementation" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;, <span class="title">Value</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Key key;</span><br><span class="line">        <span class="keyword">private</span> Value val;</span><br><span class="line">        <span class="keyword">private</span> Node left, right;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Key key, Value val)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value val)</span></span></span><br><span class="line"><span class="function">    </span>&#123; root = put(root, key, val);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node x, Key key, Value val)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> Node(key, val);</span><br><span class="line">        <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">        <span class="comment">// concise, but tricky, recursive code</span></span><br><span class="line">        <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>)</span><br><span class="line">            x.left = put(x.left, key, val);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">            x.right = put(x.right, key, val);</span><br><span class="line">        <span class="keyword">else</span>    </span><br><span class="line">            x.val = val;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Node x = root;</span><br><span class="line">        <span class="keyword">while</span> (x != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">            <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>) x = x.left;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) x = x.right;</span><br><span class="line">            <span class="keyword">else</span>              <span class="keyword">return</span> x.val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// see next</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterable&lt;Key&gt; <span class="title">iterator</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// see next</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="search-and-insert"> Search and Insert</span><a href="#search-and-insert" class="header-anchor"> </a></h3>
<h4><span id="bst-search"> BST search</span><a href="#bst-search" class="header-anchor"> </a></h4>
<p><strong>Get.</strong></p>
<ul>
<li>Return value corresponding to given key, or <em>null</em> if no such key.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Node x = root;</span><br><span class="line">        <span class="keyword">while</span> (x != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">            <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>) x = x.left;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) x = x.right;</span><br><span class="line">            <span class="keyword">else</span>              <span class="keyword">return</span> x.val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>Cost.</strong></p>
<ul>
<li>Number of compares is equal to 1 + depth of node.</li>
</ul>
<h4><span id="bst-insert"> BST insert</span><a href="#bst-insert" class="header-anchor"> </a></h4>
<p><strong>Put.</strong></p>
<ul>
<li>Associate value with key.</li>
</ul>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/insert.jpg" alt><br>
Search for key, then two cases:</p>
<ul>
<li>Key in tree -&gt; reset value.</li>
<li>Key not in tree -&gt; add new node.</li>
</ul>
<p><strong>Insert implementation</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value val)</span></span></span><br><span class="line"><span class="function"></span>&#123; root = put(root, key, val);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node x, Key key, Value val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> Node(key, val);</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="comment">// concise, but tricky, recursive code</span></span><br><span class="line">    <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>)</span><br><span class="line">        x.left = put(x.left, key, val);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">        x.right = put(x.right, key, val);</span><br><span class="line">    <span class="keyword">else</span>    </span><br><span class="line">        x.val = val;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="tree-shape"> Tree shape</span><a href="#tree-shape" class="header-anchor"> </a></h3>
<ul>
<li>Many BST’s correspond to same set of keys.</li>
<li>Number of compares for search/insert is equal to 1 + depth of node.</li>
</ul>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/case.jpg" alt><br>
<strong>Remark.</strong></p>
<ul>
<li>Tree shape depends on order of insertion.</li>
</ul>
<h3><span id="correspondence-between-bst-s-and-quicksort-partitioning"> Correspondence between BST’s and quicksort partitioning</span><a href="#correspondence-between-bst-s-and-quicksort-partitioning" class="header-anchor"> </a></h3>
<p><strong>Remark.</strong></p>
<ul>
<li>Correspondence is 1-1 if array has no duplicate keys.<br>
<img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/corres.jpg" alt></li>
</ul>
<h3><span id="mathematical-analysis"> Mathematical analysis</span><a href="#mathematical-analysis" class="header-anchor"> </a></h3>
<p><strong>Proposition.</strong><br>
If N distinct keys are inserted into a BST in random order, the expected number of compares for a search/insert is ~$ 2lnN $.(average)</p>
<p>Pf.1-1 correspondence with quicksort partitioning.</p>
<p><strong>Proposition.</strong><br>
If N distinct keys are inserted in random order, expected height of tree is ~4.311$ lnN $ (worst)</p>
<p><strong>But</strong> Worst-case height is N.<br>
(exponentially small chance when keys are inserted in random order)</p>
<h3><span id="summary"> Summary</span><a href="#summary" class="header-anchor"> </a></h3>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/summary.jpg" alt></p>
<h2><span id="ordered-operations-in-bsts"> Ordered Operations in BSTs</span><a href="#ordered-operations-in-bsts" class="header-anchor"> </a></h2>
<h3><span id="minimum-and-maximum"> Minimum and maximum</span><a href="#minimum-and-maximum" class="header-anchor"> </a></h3>
<p><strong>Minimum.</strong></p>
<ul>
<li>Smallest key in table.</li>
</ul>
<p><strong>Maximum.</strong></p>
<ul>
<li>Largest key in table.</li>
</ul>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/maxmin.jpg" alt></p>
<h3><span id="floor-and-ceiling"> Floor and ceiling</span><a href="#floor-and-ceiling" class="header-anchor"> </a></h3>
<p><strong>Floor.</strong></p>
<ul>
<li>Largest key $ \leq $ to a given key.</li>
</ul>
<p><strong>Ceiling.</strong></p>
<ul>
<li>Smallest key $ \geq $ to a given key.</li>
</ul>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/floor_ceil.jpg" alt></p>
<h4><span id="floor-implementation"> Floor implementation</span><a href="#floor-implementation" class="header-anchor"> </a></h4>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/floor.jpg" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Key <span class="title">floor</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node x = floor(root, key);</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> x.key;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">floor</span><span class="params">(Node x, Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cmp == <span class="number">0</span>) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)  <span class="keyword">return</span> floor(x.left, key);</span><br><span class="line">    </span><br><span class="line">    Node t = floor(x.right, key);</span><br><span class="line">    <span class="keyword">if</span> (t != <span class="keyword">null</span>) <span class="keyword">return</span> t;</span><br><span class="line">    <span class="keyword">else</span>           <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="subtree-counts"> Subtree counts</span><a href="#subtree-counts" class="header-anchor"> </a></h3>
<p>In each node, we store the number of nodes in the subtree rooted at that node; to implement <em>size()</em>, return the count at the root.</p>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/nodecount.jpg" alt></p>
<p><strong>Remark.</strong><br>
This facilitates efficient implementation of <em>rank()</em> and <em>select()</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Key key;</span><br><span class="line">    <span class="keyword">private</span> Value val;</span><br><span class="line">    <span class="keyword">private</span> Node left;</span><br><span class="line">    <span class="keyword">private</span> Node right;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="keyword">return</span> size(root); &#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">(Node x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> x.count;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node x, Key key, Value val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> Node(key, val, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>) x.left = put(x.left, key, val);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) x.right = put(x.right, key, val);</span><br><span class="line">    <span class="keyword">else</span>              x.val = val;</span><br><span class="line">    x.count = <span class="number">1</span> + size(x.left) + size(x.right);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="rank"> Rank</span><a href="#rank" class="header-anchor"> </a></h3>
<p>How many keys &lt; k?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> rank(key, root);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key, Node x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>) <span class="keyword">return</span> rank(key, x.left);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span> + size(x.left) + rank(key, x.right);</span><br><span class="line">    <span class="keyword">else</span>              <span class="keyword">return</span> size(x.left); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="inorder-traversal"> Inorder traversal</span><a href="#inorder-traversal" class="header-anchor"> </a></h3>
<ul>
<li>Traverse left subtree.</li>
<li>Enqueue key.</li>
<li>Traverse right subtree.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Queue&lt;Key&gt; q = <span class="keyword">new</span> Queue&lt;Key&gt;();</span><br><span class="line">    inorder(root, q);</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">inorder</span><span class="params">(Node x, Queue&lt;Key&gt; q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    inorder(x.left, q);</span><br><span class="line">    q.enqueue(x.key);</span><br><span class="line">    inorder(x.right, q);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/summary2.jpg" alt></p>
<h2><span id="deletion-in-bsts"> Deletion in BSTs</span><a href="#deletion-in-bsts" class="header-anchor"> </a></h2>
<h3><span id="bst-deletion-lazy-approach"> BST deletion: lazy approach</span><a href="#bst-deletion-lazy-approach" class="header-anchor"> </a></h3>
<p><strong>To remove a node with a given key:</strong></p>
<ul>
<li>Set its value to <em>null</em>.</li>
<li>Leave key in tree to guide searches (but don’t consider it equal in search).</li>
</ul>
<dl>
<dt><strong>Cost.</strong></dt>
<dd><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>l</mi><mi>n</mi><msup><mi>N</mi><mo mathvariant="normal">′</mo></msup></mrow><annotation encoding="application/x-tex">2 lnN&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span> per insert, search, and delete (if keys in random order), where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>N</mi><mo mathvariant="normal">′</mo></msup></mrow><annotation encoding="application/x-tex">N&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span> is the number of key-value pairs ever inserted in the BST.</dd>
</dl>
<p><strong>Unsatisfactory solution.</strong><br>
Tombstone (memory) overload.</p>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/delete.jpg" alt></p>
<h3><span id="deleting-the-minimum"> Deleting the minimum</span><a href="#deleting-the-minimum" class="header-anchor"> </a></h3>
<p>First we consider an easier case:<br>
To delete the minimum key:</p>
<ul>
<li>Go left until finding a node with a null left link.</li>
<li>Replace that node by its right link.</li>
<li>Update subtree counts.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    root = deleteMin(root);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">deleteMin</span><span class="params">(Node x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x.left == <span class="keyword">null</span>) <span class="keyword">return</span> x.right;</span><br><span class="line">    x.left = deleteMin(x.left);</span><br><span class="line">    x.count = <span class="number">1</span> + size(x.left) + size(x.right);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/deletemin.jpg" alt></p>
<h3><span id="hibbard-deletion"> Hibbard deletion</span><a href="#hibbard-deletion" class="header-anchor"> </a></h3>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/case0.jpg" alt></p>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/case1.jpg" alt></p>
<p><img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/case2.jpg" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    root = delete(root, key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">delete</span><span class="params">(Node x, Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>) x.left = delete(x.left, key);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) x.right = delete(x.right, key);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x.right == <span class="keyword">null</span>) <span class="keyword">return</span> x.left;</span><br><span class="line">        <span class="keyword">if</span> (x.left == <span class="keyword">null</span>) <span class="keyword">return</span> x.right;</span><br><span class="line"></span><br><span class="line">    Node t = x;</span><br><span class="line">    x = min(t.right);</span><br><span class="line">    x.right = deleteMin(t.right);</span><br><span class="line">    x.left = t.left;</span><br><span class="line">    &#125;</span><br><span class="line">    x.count = size(x.left) + size(x.right) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Problem:</strong></p>
<ul>
<li>Not symmetric.</li>
</ul>
<p><strong>Surprising consequence.</strong></p>
<ul>
<li>Trees not random -&gt; $ \sqrt{N} $ per op.<br>
<img src="/2020/02/17/Algorithms-Part1-Binary-Search-Trees/sum.jpg" alt></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/17/Algorithms-Part1-Symbol-Tables/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/17/Algorithms-Part1-Symbol-Tables/" itemprop="url">Algorithms-Part1-Symbol-Tables</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-17T09:49:51+08:00">
                2020-02-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="toc">
<!-- toc -->
<ul>
<li><a href="#what-is-symbol-tables">What is Symbol tables</a>
<ul>
<li><a href="#symbol-tables">Symbol Tables</a></li>
<li><a href="#keys-and-values">Keys and values</a></li>
<li><a href="#equality-test">Equality test</a></li>
<li><a href="#st-test-client-for-traces">ST test client for traces</a></li>
</ul>
</li>
<li><a href="#ordered-operations">Ordered Operations</a>
<ul>
<li><a href="#ordered-symbol-table-api">Ordered symbol table API</a></li>
<li><a href="#binary-search-ordered-symbol-table-operations-summary">Binary search: ordered symbol table operations summary</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
</div>
## What is Symbol tables
### Symbol Tables
**Key-value pair abstraction**
- $ \color{red}{Insert} $ a value with specified key.
- Given a key, $ \color{red}{search} $ for the corresponding value.
<p><strong>Basic symbol table API</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ST</span>&lt;<span class="title">Key</span>, <span class="title">Value</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="title">ST</span>()                         // <span class="title">create</span> <span class="title">a</span> <span class="title">symbol</span> <span class="title">table</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">void</span> <span class="title">put</span>(<span class="title">Key</span> <span class="title">key</span>, <span class="title">Value</span> <span class="title">val</span>) // <span class="title">put</span> <span class="title">key</span>-<span class="title">value</span> <span class="title">pair</span> <span class="title">into</span> <span class="title">the</span> <span class="title">table</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">Value</span> <span class="title">get</span>(<span class="title">Key</span> <span class="title">key</span>)           // <span class="title">value</span> <span class="title">paired</span> <span class="title">with</span> <span class="title">key</span> (<span class="title">null</span> <span class="title">if</span> <span class="title">key</span> <span class="title">is</span> <span class="title">absent</span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">void</span> <span class="title">delete</span>(<span class="title">Key</span> <span class="title">key</span>)         // <span class="title">remove</span> <span class="title">key</span> (<span class="title">and</span> <span class="title">its</span> <span class="title">value</span>) <span class="title">from</span> <span class="title">table</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">boolean</span> <span class="title">contains</span>(<span class="title">Key</span> <span class="title">key</span>)    // <span class="title">is</span> <span class="title">there</span> <span class="title">a</span> <span class="title">value</span> <span class="title">paired</span> <span class="title">with</span> <span class="title">key</span>?</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">boolean</span> <span class="title">isEmpty</span>()            // <span class="title">is</span> <span class="title">the</span> <span class="title">table</span> <span class="title">empty</span>?</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">int</span> <span class="title">size</span>()                   // <span class="title">number</span> <span class="title">of</span> <span class="title">key</span>-<span class="title">value</span> <span class="title">pairs</span> <span class="title">in</span> <span class="title">the</span> <span class="title">table</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">Iterable</span>&lt;<span class="title">Key</span>&gt; <span class="title">keys</span>()         // <span class="title">all</span> <span class="title">the</span> <span class="title">keys</span> <span class="title">in</span> <span class="title">the</span> <span class="title">table</span></span></span><br></pre></td></tr></table></figure>
<p><strong>Conventions</strong></p>
<ul>
<li>Values are not null.</li>
<li>Method get() returns null if key not present.</li>
<li>Method put() overwrites old value with new value.</li>
</ul>
<p><strong>Intended consequences</strong></p>
<ul>
<li>Easy to implement contains()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> get(key) != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Can implement lazy version of delete()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    put(key, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="keys-and-values"> Keys and values</span><a href="#keys-and-values" class="header-anchor"> </a></h3>
<p><strong>Value type:</strong> Any generic type.<br>
<strong>Key type:</strong> several natural assumptions.</p>
<ul>
<li>Assume keys are <em>Comparable</em>, use <em>compareTo()</em>.</li>
<li>Assume keys are any generic type, use <em>equals()</em> to test equality.</li>
<li>Assume keys are any generic type, use <em>hashcode()</em> to scramble key.<br>
<strong>Best practices:</strong> Use immutable types for symbol table keys.</li>
<li>Immutable in Java: String, Integer, Double, java.io.File…</li>
<li>Mutable in Java: StringBuilder, java.net.URL, arrays, …</li>
</ul>
<h3><span id="equality-test"> Equality test</span><a href="#equality-test" class="header-anchor"> </a></h3>
<p>All java classes inherit a method <em>equals().</em><br>
<strong>Java requirements.</strong> For any references x, y and z:</p>
<ul>
<li>Reflexive: <em>x.equals(x)</em> is true.</li>
<li>Symmetric: <em>x.equals(y)</em> iff <em>y.equals(x)</em>.</li>
<li>Transitive: if <em>x.equals(y)</em> and <em>y.equals(z)</em>, then <em>x.equals(z)</em>.</li>
<li>Non-null: <em>x.equals(null)</em> is false.</li>
</ul>
<p><strong>Default implementation.</strong> (x == y)</p>
<ul>
<li>Do x and y refer to the same object?</li>
</ul>
<p><strong>Customized implementations.</strong></p>
<ul>
<li>Integer, Double, String, File, URL,…</li>
</ul>
<p><strong>User-defined implementations.</strong></p>
<ul>
<li>Some care needed.</li>
</ul>
<p><strong>Implementing equals for user-defined types</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Date</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Date</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> month;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> day;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> year;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (y == <span class="keyword">this</span>) <span class="keyword">return</span> <span class="keyword">true</span>;  <span class="comment">// optimize for true object equality</span></span><br><span class="line">        <span class="keyword">if</span> (y == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>; <span class="comment">// check for null</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (y.getClass() != <span class="keyword">this</span>.getClass()) <span class="comment">// objects must be in the same class(religion: getClass() vs. instanceof)</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        Date that = (Date) y;  <span class="comment">// cast is guaranteed to succeed</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.day != that.day) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.month != that.month) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.year != that.year) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Equals design</strong><br>
“Standard” recipe for user-defined types.</p>
<ul>
<li>Optimization for reference equality.</li>
<li>Check against <em>null</em>.</li>
<li>Check that two objects are of the same type and cast.</li>
<li>Compare each significant field:<br>
– if field is a primitive type, use <em>==</em><br>
– if field is an object, use <em>equals()</em>  (<em>apply rule recursively</em>)<br>
– if field is an array, apply to each entry  (<em>alternatively, use Arrays.equals(a,b) or Arrays.deepEquals(a, b), but not a.equals(b)</em>)</li>
</ul>
<p><strong>Best practices.</strong></p>
<ul>
<li>No need to use calculated fields that depend on other fields.</li>
<li>Compare fields mostly likely to differ first.</li>
<li>Make <em>compareTo()</em> consistent with equals(). (<em>x.equals(y) if and only if (x.compareTo(y) == 0)</em>)</li>
</ul>
<h3><span id="st-test-client-for-traces"> ST test client for traces</span><a href="#st-test-client-for-traces" class="header-anchor"> </a></h3>
<h4><span id="example-1"> Example 1</span><a href="#example-1" class="header-anchor"> </a></h4>
<p>Build ST by associating value <em>i</em> with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>i</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">i^{th}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">h</span></span></span></span></span></span></span></span></span></span></span></span> string from standard input.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ST&lt;String, Integer&gt; st = <span class="keyword">new</span> ST&lt;String, Integer&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; !StdIn.isEmpty(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        String key = StdIn.readString();</span><br><span class="line">        st.put(key, i)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (String s : st.keys())</span><br><span class="line">        StdOut.println(s + <span class="string">" "</span> + st.get(s));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="example-2"> Example 2</span><a href="#example-2" class="header-anchor"> </a></h4>
<p>We want to know the appearance frequency of a word in an article.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FrequencyCounter</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> minlen = Interger.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">        ST&lt;String, Integer&gt; st = <span class="keyword">new</span> ST&lt;String, Integer&gt;();  <span class="comment">// create ST</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!StdIn.isEmpty())</span><br><span class="line">        &#123;</span><br><span class="line">            String word = StdIn.readString();</span><br><span class="line">            <span class="keyword">if</span> (!st.contains(word)) st.put(word, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span>                    st.put(word, st.get(word) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        String max = <span class="string">""</span>;</span><br><span class="line">        st.put(max, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (String word : st.keys())</span><br><span class="line">            <span class="keyword">if</span> (st.get(word) &gt; st.get(max))</span><br><span class="line">                max = word;</span><br><span class="line">        StdOut.println(max + <span class="string">" "</span> + st.get(max));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line">## Elementary Symbol Tables Implementations</span><br><span class="line">### Sequential search in a linked list</span><br><span class="line">**Data structure.**</span><br><span class="line">- <span class="function">Maintain <span class="title">an</span> <span class="params">(unordered)</span> linked list of key-value pairs.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">**Search.**</span></span><br><span class="line"><span class="function">- Scan through all keys until find a match.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">**Insert.**</span></span><br><span class="line"><span class="function">- Scan through all keys until find a match</span>; <span class="keyword">if</span> no match put to front.</span><br><span class="line"></span><br><span class="line">**Summary**</span><br><span class="line">![](Algorithms-Part1-Symbol-Tables/unordered_node_list.jpg)</span><br><span class="line"></span><br><span class="line">Challenge: Efficient implementations of both search and insert.</span><br><span class="line"></span><br><span class="line">### Binary search in an ordered array</span><br><span class="line">**Data structure.**</span><br><span class="line">- Maintain an ordered array of key-value pairs.</span><br><span class="line"></span><br><span class="line">**Rank helper function.**</span><br><span class="line">- How many keys &lt; k?</span><br><span class="line">![](Algorithms-Part1-Symbol-Tables/trace.jpg)</span><br><span class="line"></span><br><span class="line">**Binary search: Java implementation**</span><br><span class="line">```java</span><br><span class="line"><span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isEmpty()) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> i = rank(key);</span><br><span class="line">    <span class="keyword">if</span> (i &lt; N &amp;&amp; keys[i].compareTo(key) == <span class="number">0</span>) <span class="keyword">return</span> vals[i];</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = N - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> cmp = key.compareTo(keys[mid]);</span><br><span class="line">        <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) hi = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span>    <span class="keyword">return</span> mid; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Problem.</strong></p>
<ul>
<li>To insert, need to shift all greater keys over.<br>
<img src="/2020/02/17/Algorithms-Part1-Symbol-Tables/insert.jpg" alt></li>
</ul>
<p><strong>Summary</strong><br>
<img src="/2020/02/17/Algorithms-Part1-Symbol-Tables/summary1.jpg" alt></p>
<h2><span id="ordered-operations"> Ordered Operations</span><a href="#ordered-operations" class="header-anchor"> </a></h2>
<h3><span id="ordered-symbol-table-api"> Ordered symbol table API</span><a href="#ordered-symbol-table-api" class="header-anchor"> </a></h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;, <span class="title">Value</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="title">ST</span>()                         // <span class="title">create</span> <span class="title">a</span> <span class="title">symbol</span> <span class="title">table</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">void</span> <span class="title">put</span>(<span class="title">Key</span> <span class="title">key</span>, <span class="title">Value</span> <span class="title">val</span>) // <span class="title">put</span> <span class="title">key</span>-<span class="title">value</span> <span class="title">pair</span> <span class="title">into</span> <span class="title">the</span> <span class="title">table</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">Value</span> <span class="title">get</span>(<span class="title">Key</span> <span class="title">key</span>)           // <span class="title">value</span> <span class="title">paired</span> <span class="title">with</span> <span class="title">key</span> (<span class="title">null</span> <span class="title">if</span> <span class="title">key</span> <span class="title">is</span> <span class="title">absent</span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">void</span> <span class="title">delete</span>(<span class="title">Key</span> <span class="title">key</span>)         // <span class="title">remove</span> <span class="title">key</span> (<span class="title">and</span> <span class="title">its</span> <span class="title">value</span>) <span class="title">from</span> <span class="title">table</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">boolean</span> <span class="title">contains</span>(<span class="title">Key</span> <span class="title">key</span>)    // <span class="title">is</span> <span class="title">there</span> <span class="title">a</span> <span class="title">value</span> <span class="title">paired</span> <span class="title">with</span> <span class="title">key</span>?</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">boolean</span> <span class="title">isEmpty</span>()            // <span class="title">is</span> <span class="title">the</span> <span class="title">table</span> <span class="title">empty</span>?</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">int</span> <span class="title">size</span>()                   // <span class="title">number</span> <span class="title">of</span> <span class="title">key</span>-<span class="title">value</span> <span class="title">pairs</span> <span class="title">in</span> <span class="title">the</span> <span class="title">table</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">Key</span> <span class="title">min</span>()                    // <span class="title">smallest</span> <span class="title">key</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">Key</span> <span class="title">max</span>()                    // <span class="title">largest</span> <span class="title">key</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">Key</span> <span class="title">floor</span>(<span class="title">Key</span> <span class="title">key</span>)           // <span class="title">largest</span> <span class="title">key</span> <span class="title">less</span> <span class="title">than</span> <span class="title">or</span> <span class="title">equal</span> <span class="title">to</span> <span class="title">key</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">Key</span> <span class="title">ceiling</span>(<span class="title">Key</span> <span class="title">key</span>)         // <span class="title">smallest</span> <span class="title">key</span> <span class="title">greater</span> <span class="title">than</span> <span class="title">or</span> <span class="title">equal</span> <span class="title">to</span> <span class="title">the</span> <span class="title">key</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">int</span> <span class="title">rank</span>(<span class="title">Key</span> <span class="title">key</span>)            // <span class="title">number</span> <span class="title">of</span> <span class="title">keys</span> <span class="title">less</span> <span class="title">than</span> <span class="title">key</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">Key</span> <span class="title">select</span>(<span class="title">int</span> <span class="title">k</span>)            // <span class="title">key</span> <span class="title">of</span> <span class="title">rank</span> <span class="title">k</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">void</span> <span class="title">deleteMin</span>()             // <span class="title">delete</span> <span class="title">smallest</span> <span class="title">key</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">void</span> <span class="title">deleteMax</span>()             // <span class="title">delete</span> <span class="title">largest</span> <span class="title">key</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line">    int size(Key lo, Key hi)     // number of keys in [lo...hi]</span><br><span class="line"></span><br><span class="line">    <span class="function">Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">(Key lo, Key hi)</span>  <span class="comment">// keys in [lo...hi], in sorted order</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span>         <span class="comment">// all the keys in the table</span></span></span><br></pre></td></tr></table></figure>
<h3><span id="binary-search-ordered-symbol-table-operations-summary"> Binary search: ordered symbol table operations summary</span><a href="#binary-search-ordered-symbol-table-operations-summary" class="header-anchor"> </a></h3>
<p><img src="/2020/02/17/Algorithms-Part1-Symbol-Tables/summary2.jpg" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/16/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3%E4%B8%8A%E2%80%94%E2%80%94%E7%AC%AC%E4%BA%94%E8%AE%B2%EF%BC%9ATraining-versus-Testing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/16/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3%E4%B8%8A%E2%80%94%E2%80%94%E7%AC%AC%E4%BA%94%E8%AE%B2%EF%BC%9ATraining-versus-Testing/" itemprop="url">机器学习基石上——第五讲：Training versus Testing</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-16T13:12:48+08:00">
                2020-02-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Machine-Learning/" itemprop="url" rel="index">
                    <span itemprop="name">Machine Learning</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

	<div class="row">
    <embed src="./Training_versus_Testing.pdf" width="100%" height="550" type="application/pdf">
	</div>



          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/13/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3%E4%B8%8A%E2%80%94%E2%80%94%E7%AC%AC%E5%9B%9B%E8%AE%B2%EF%BC%9AFeasibility-of-Learning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/13/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%9F%B3%E4%B8%8A%E2%80%94%E2%80%94%E7%AC%AC%E5%9B%9B%E8%AE%B2%EF%BC%9AFeasibility-of-Learning/" itemprop="url">机器学习基石上——第四讲：Feasibility of Learning</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-13T09:59:48+08:00">
                2020-02-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Machine-Learning/" itemprop="url" rel="index">
                    <span itemprop="name">Machine Learning</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

	<div class="row">
    <embed src="./feasibility_of_learning.pdf" width="100%" height="550" type="application/pdf">
	</div>




          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Starfly</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Starfly</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.staticfile.org/MathJax/MathJax-2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>

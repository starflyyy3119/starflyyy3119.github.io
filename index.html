<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, Starfly" />










<meta property="og:type" content="website">
<meta property="og:title" content="Starfly&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Starfly&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Starfly">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Starfly's blog</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Starfly's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/14/CS61B-Disjoint-Sets/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/14/CS61B-Disjoint-Sets/" itemprop="url">CS61B-Disjoint Sets</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-14T01:33:01+08:00">
                2020-03-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Data-Structure/" itemprop="url" rel="index">
                    <span itemprop="name">Data Structure</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="disjoint-sets">Disjoint Sets</span><a href="#disjoint-sets" class="header-anchor"> </a></h2><h3><span id="the-dynamic-connectivity-problem">The Dynamic Connectivity Problem</span><a href="#the-dynamic-connectivity-problem" class="header-anchor"> </a></h3><p>Goal: Given a series of pairwise integers connectedness declarations, determine if two integers (or items) are connected. Two operations:</p>
<ul>
<li>connect(p,q): Connect items p and q.</li>
<li>isConnected(p,q): Are p and q connected?</li>
</ul>
<h3><span id="the-disjoint-sets-adt">The DisJoint Sets ADT</span><a href="#the-disjoint-sets-adt" class="header-anchor"> </a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DisjointSets</span> </span>&#123;</span><br><span class="line">    <span class="comment">/** Connect two items P and Q. */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Checks to see if two items are connected. */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Goal: Design an efficient DisjointSets implementation.</p>
<ul>
<li>Number of elements N can be huge.</li>
<li>Number of method calls M can be huge.</li>
<li>Calls to methods may be interspersed (e.g. can’t assume that we stop getting connect calls after some point.)</li>
</ul>
<h3><span id="a-better-approach-connected-components">A better Approach: Connected Components</span><a href="#a-better-approach-connected-components" class="header-anchor"> </a></h3><p>Rather than manually writing out every single connecting line, record the sets that something belongs to.</p>
<p><img src="/2020/03/14/CS61B-Disjoint-Sets/com.jpg" alt></p>
<p><strong>A connected component</strong> is a maximal set of items that are mutually connected.</p>
<h3><span id="quick-find">Quick Find</span><a href="#quick-find" class="header-anchor"> </a></h3><h4><span id="using-an-array">Using an Array</span><a href="#using-an-array" class="header-anchor"> </a></h4><p>One natural choice: int[] where ith entry gives set number of items i.</p>
<ul>
<li>connect(p, q): Change entries that equal id[p] to id[q].</li>
</ul>
<h4><span id="quickfindds">QuickFindDS</span><a href="#quickfindds" class="header-anchor"> </a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickFindDS</span> <span class="keyword">implements</span> <span class="title">DisjointSets</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QuickFindDS</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            id[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id[p] == id[q];   <span class="comment">// very fast</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;  <span class="comment">// relatively slow</span></span><br><span class="line">        <span class="keyword">int</span> pid = id[p];</span><br><span class="line">        <span class="keyword">int</span> qid = id[q];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; id.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (id[i] == pid) &#123;</span><br><span class="line">                id[i] = qid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="quick-union">Quick Union</span><a href="#quick-union" class="header-anchor"> </a></h3><p>Idea: Assign each node a parent (instead of an id).</p>
<p>connect(p, q)</p>
<ul>
<li>Make root(p) into a child of root(q).</li>
</ul>
<p>Problem:</p>
<ul>
<li>Tree can get too tall.</li>
</ul>
<h4><span id="quickunionds">QuickUnionDS</span><a href="#quickunionds" class="header-anchor"> </a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickUnionDS</span> <span class="keyword">implements</span> <span class="title">DisjointSets</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] parent;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QuickUnionDS</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        parent = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            parent[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">root</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123; <span class="comment">// For N items, this means a worst case runtime Theta(N)</span></span><br><span class="line">        <span class="keyword">while</span> (p != parent[p]) &#123;</span><br><span class="line">            p = parent[p];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> root(p) == root(q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = root(p);</span><br><span class="line">        <span class="keyword">int</span> j = root(q);</span><br><span class="line">        parent[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="perfomance-summary">Perfomance Summary</span><a href="#perfomance-summary" class="header-anchor"> </a></h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Implementation</th>
<th style="text-align:center">Constructor</th>
<th style="text-align:center">connect</th>
<th style="text-align:center">isConnected</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">QuickFindDS</td>
<td style="text-align:center">$ \Theta(N) $</td>
<td style="text-align:center">$ \Theta(N) $</td>
<td style="text-align:center">$ \Theta(1) $</td>
</tr>
<tr>
<td style="text-align:center">QuickUnionDS</td>
<td style="text-align:center">$ \Theta(N) $</td>
<td style="text-align:center">$ O(N) $</td>
<td style="text-align:center">$ O(N) $</td>
</tr>
</tbody>
</table>
</div>
<p>QuickFindDS defect: QuickFindDS is too slow: Connecting two items takes N times in the worst case.</p>
<p>QuickUnion defect: Trees can get tall. Results in potentially even worse performance than QuickFind if tree is imbalanced.</p>
<h3><span id="weighted-quickunion">Weighted QuickUnion</span><a href="#weighted-quickunion" class="header-anchor"> </a></h3><p>Modify quick-union to avoid tall trees.</p>
<ul>
<li>Track tree size (number of elements).</li>
<li>New rule: Always link root of smaller tree to larger tree.</li>
</ul>
<h4><span id="implementing-weightedquickunion">Implementing WeightedQuickUnion</span><a href="#implementing-weightedquickunion" class="header-anchor"> </a></h4><p>Minimal changes needed:</p>
<ul>
<li>Use parent[] array as before, but also add size[] array.</li>
<li>isConnected(int p, int q) requires no changes.</li>
<li>connect(int p, int q) needs two changes:<br>— Link root of smaller tree to larger one.<br>— Update size[] array.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = find(p);</span><br><span class="line">    <span class="keyword">int</span> j = find(q);</span><br><span class="line">    <span class="keyword">if</span> (i == j) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (size[i] &lt; size[j]) &#123;</span><br><span class="line">        parent[i] = j;</span><br><span class="line">        size[j] += size[i];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent[j] = i;</span><br><span class="line">        size[i] += size[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="weightedunion-performance">WeightedUnion Performance</span><a href="#weightedunion-performance" class="header-anchor"> </a></h4><p>As before, connect and isConnected require time proportional to depth of the items involved.</p>
<p>Max depth of any item: logN</p>
<p>Very brief proof:</p>
<ul>
<li>Depth of an element x increases only when tree T1 that contains x is linked below some other tree T2.<br>— The size of the tree at least doubles since weight(T2) &gt;= weight(T1).</li>
<li>Tree containing x doubles at most logN times.</li>
</ul>
<h3><span id="performance-summary">Performance Summary</span><a href="#performance-summary" class="header-anchor"> </a></h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Implementation</th>
<th style="text-align:center">Constructor</th>
<th style="text-align:center">connect</th>
<th style="text-align:center">isConnected</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">QuickFindDS</td>
<td style="text-align:center">$ \Theta(N) $</td>
<td style="text-align:center">$ \Theta(N) $</td>
<td style="text-align:center">$ \Theta(1) $</td>
</tr>
<tr>
<td style="text-align:center">QuickUnionDS</td>
<td style="text-align:center">$ \Theta(N) $</td>
<td style="text-align:center">$ O(N) $</td>
<td style="text-align:center">$ O(N) $</td>
</tr>
<tr>
<td style="text-align:center">WeightedQuickUnionDS</td>
<td style="text-align:center">$ \Theta(N) $</td>
<td style="text-align:center">$ O(logN) $</td>
<td style="text-align:center">$ O(logN) $</td>
</tr>
</tbody>
</table>
</div>
<p>By tweaking QuickUnionDS we’ve achieved logarithmic time performance.</p>
<ul>
<li>Fast enough for most practical problems.</li>
</ul>
<h3><span id="path-compression">Path Compression</span><a href="#path-compression" class="header-anchor"> </a></h3><p>Below is the topology of the worst case if we use WeightedQuickUnion.</p>
<p><img src="/2020/03/14/CS61B-Disjoint-Sets/path.jpg" alt></p>
<ul>
<li>Clever idea: When we do isConnected(15, 10), tie all nodes seen to the root.<br>— Additional cost is insignificant.</li>
</ul>
<p><img src="/2020/03/14/CS61B-Disjoint-Sets/path2.jpg" alt></p>
<p>Path compression results in a union/connected operations that are very close to amortized constant time.</p>
<ul>
<li>M operations on N nodes is $ O(N + M lg^*N) $.</li>
<li>$ lg^* $ is less than 5 for any realistic input.</li>
</ul>
<p><img src="/2020/03/14/CS61B-Disjoint-Sets/structure.jpg" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">root</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p == parent[p]) &#123;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent[p] = root(parent[p]);</span><br><span class="line">        <span class="keyword">return</span> parent[p];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="everything-altogether">Everything Altogether</span><a href="#everything-altogether" class="header-anchor"> </a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeightedQuickUnionDSWithPathCompression</span> <span class="keyword">implements</span> <span class="title">DisjointSets</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] parent;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeightedQuickUnionDSWithPathCompression</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        parent = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        size = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            parent[i] = i;</span><br><span class="line">            size[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">root</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p == parent[p]) &#123;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent[p] = root(parent[p]);</span><br><span class="line">        <span class="keyword">return</span> parent[p];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> root(p) == root(q);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = root(p);</span><br><span class="line">        <span class="keyword">int</span> j = root(q);</span><br><span class="line">        <span class="keyword">if</span> (i == j) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (size[i] &lt; size[j]) &#123;</span><br><span class="line">            parent[i] = j;</span><br><span class="line">            size[j] += size[i];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            parent[j] = i;</span><br><span class="line">            size[i] += size[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="performance-summary">Performance Summary</span><a href="#performance-summary" class="header-anchor"> </a></h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Implementation</th>
<th style="text-align:center">Runtime</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">QuickFindDS</td>
<td style="text-align:center">$ \Theta(NM) $</td>
</tr>
<tr>
<td style="text-align:center">QuickUnionDS</td>
<td style="text-align:center">$ O(NM) $</td>
</tr>
<tr>
<td style="text-align:center">WeightedQuickUnionDS</td>
<td style="text-align:center">$ O(N + MlogN) $</td>
</tr>
<tr>
<td style="text-align:center">WeightedQuickUnionDSWithPathCompression</td>
<td style="text-align:center">$ O(N + M \alpha(N)) $</td>
</tr>
</tbody>
</table>
</div>
<p>In practical, $ \alpha(N) $ is less than 5.</p>
<p>Runtimes are given assuming:</p>
<ul>
<li>We have a DisjointSets object of size N.</li>
<li>We perform M operations, where an operation is defined as either a call to connected or isConnected.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/10/CS61B-Efficient-Programming/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/10/CS61B-Efficient-Programming/" itemprop="url">CS61B-Efficient Programming</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-10T14:40:27+08:00">
                2020-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="asymptotics">Asymptotics</span><a href="#asymptotics" class="header-anchor"> </a></h2><h3><span id="some-terms">Some terms</span><a href="#some-terms" class="header-anchor"> </a></h3><ul>
<li>Module: A set of methods that work together to perform some task or set of related tasks.</li>
<li>Encapsulated: A module is said to be encapsulated if its implementation is completely hidden, and it can be accessed only through a documented interface.</li>
</ul>
<h4><span id="api-s">API’s</span><a href="#api-s" class="header-anchor"> </a></h4><p>An API(Application Programming Interface) of an ADT is the list of constructors and the methods and a short description of each.</p>
<p>API consists of syntactic and semantic specification.</p>
<ul>
<li>Compilers verifies that <strong>syntax</strong> is met.<br>— A.K.A, everything specified in the API is present.</li>
<li>Tests help verify that <strong>semantics</strong> are correct.<br>— A.K.A everything actually works they way it should.</li>
</ul>
<h4><span id="adt-s">ADT’s</span><a href="#adt-s" class="header-anchor"> </a></h4><p>ADT’s (Abstract Data Structures) are high-level types that are defined by their behaviors, not their implementations.</p>
<p>i.e. Deuqe in Proj1 was an ADT that had certain behaviors (addFirst, addLast, etc.) But, the data structures we usually used to implement it was ArrayDeque and LinkedListDeque.</p>
<p>Some ADT’s are actually special cases of other ADT’s. For example, Stacks and Queues are just lists that have even more specific behavior.</p>
<h4><span id="writing-a-stack-in-different-ways">Writing a stack in different ways</span><a href="#writing-a-stack-in-different-ways" class="header-anchor"> </a></h4><p>Extension:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtensionStack</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">extends</span> <span class="title">LinkedList</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Item x)</span> </span>&#123;</span><br><span class="line">        add(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Delegation:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackAdapter</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List L;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StackAdapter</span><span class="params">(List&lt;Item&gt; worker)</span> </span>&#123;</span><br><span class="line">        L = worker;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Item x)</span> </span>&#123;</span><br><span class="line">        L.add(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>This approach is similar to the previous one, except it can use any class that implements the List interface (Linked List, ArrayList, etc).</p>
<p><strong>Delegation vs. Extension</strong><br>Extension tends to be used when you know what is going on in the parent class. In other words, you know how the methods are implemented. Additionally, with extension, you are basically saying that the class you are extending from acts similarly to the one that is doing the extending. On the other hand, Delegation is when you do not want to consider your current class to be a version of the class that you are pulling the method from.</p>
<h3><span id="asymptotics-1-an-introduction-to-asymptotic-analysis">Asymptotics 1: An introduction to Asymptotic Analysis</span><a href="#asymptotics-1-an-introduction-to-asymptotic-analysis" class="header-anchor"> </a></h3><h4><span id="runtime-characterization">Runtime Characterization</span><a href="#runtime-characterization" class="header-anchor"> </a></h4><p>Technique 1: Measure execution time in seconds using a client program.</p>
<ul>
<li>Good: Easy to measure, meaning is obvious.</li>
<li>Bad: May require large amounts of computation time. Result varies with machine, compiler, input data, etc.</li>
</ul>
<p>Technique 2A: Count possible operations for an array of size N = 10000.</p>
<ul>
<li>Good: Machine independent. Input dependence captured in model.</li>
<li>Bad: Tedious to compute. Array size was arbitrary. Doesn’t tell you actual time.</li>
</ul>
<p>Technique 2B: Count possible operations in terms of input array size N.</p>
<ul>
<li>Good: Machine independent. Input dependence captured in model. Tells you how algorithm scales.</li>
<li>Bad: Even more tedious to compute. Doesn’t tell you actual time.</li>
</ul>
<h4><span id="asymptotic-behavior">Asymptotic Behavior</span><a href="#asymptotic-behavior" class="header-anchor"> </a></h4><p>In most cases, we care only about asymptotic behavior, i.e. what happens for very large N.</p>
<ul>
<li>Simulation of billions of interacting paricles.</li>
<li>Social network with billions of users.</li>
<li>Logging of billions of transactions.</li>
<li>Encoding of billions of bytes of video data.</li>
</ul>
<p>Algorithms which scale well (e.g. look like lines) have better asymptotic runtime behavior than algorithms that scale relatively poorly. (e.g. look like parabolas)</p>
<p><strong>Intuitive Simplification 1. Consider Only the Worst Case</strong></p>
<ul>
<li>Justification: When comparing algorithms, we often care only about the worst case.</li>
</ul>
<p><strong>Intuitive Simplification 2.</strong> Restrict Attention to One Operation</p>
<ul>
<li>Pick some representative operation to act as a proxy for the overall runtime.</li>
</ul>
<p>We call our choice the “cost model”.</p>
<p><strong>Intuitive Simplification 3.</strong> Ignore lower order terms.</p>
<p><strong>Intuitive Simplification 4.</strong> Ignore multiplicative constants.</p>
<p>Our process:</p>
<ul>
<li>Construct a table of exact counts of all possible operations.</li>
<li>Convert table into a worst case order of growth using 4 simplifications.</li>
</ul>
<p>By using our simplifications from the outset, we can avoid building the table at all.</p>
<h4><span id="simplified-analysis-process">Simplified Analysis Process</span><a href="#simplified-analysis-process" class="header-anchor"> </a></h4><p>Rather than building the entire table, we can instead:</p>
<ul>
<li>Choose a representative operation to count (a.k.a. cost model)</li>
<li>Figure out the order of growth for the count of the representative operation by either:<br>— Making an exact count, then discarding the unnecessary pieces.<br>— Using intuition and inspection to determine order of growth</li>
</ul>
<h4><span id="formalizing-order-of-growth">Formalizing Order of Growth</span><a href="#formalizing-order-of-growth" class="header-anchor"> </a></h4><p>Big $ \Theta $ Definition: $ R(N) \in \Theta(f(N)) $ means there exist positive constants $k_1$ and $k_2$ such that:<br>$ k_1 \cdot f(N) \leq R(N) \leq k_2 \cdot f(N) $<br>for all values of $ N $ greater than some $ N_0 $</p>
<p>Big $ O $:<br>Whereas Big Theta can informally be thought of as something like ‘equals’, Big O can be thought of as “less than or equals”.</p>
<ul>
<li>$ N^3 + 3 N^4 \in \Theta(N^4) $</li>
<li>$ N^3 + 3 N^4 \in O(N^4)  $</li>
<li>$ N^3 + 3 N^4 \in O(N^6) $</li>
<li>$ N^3 + 3 N^4 \in O(N!) $</li>
<li>$ N^3 + 3 N^4 \in O(N^N) $</li>
</ul>
<p>Big $ O $ Definition:<br> $ R(N) \in O(f(N)) $ means there exist positive constants $k_2$ such that:<br>$ R(N) \leq k_2 \cdot f(N) $<br>for all values of $ N $ greater than some $ N_0 $</p>
<h3><span id="asymptotics-2">Asymptotics 2</span><a href="#asymptotics-2" class="header-anchor"> </a></h3><h4><span id="binary-search">Binary Search</span><a href="#binary-search" class="header-anchor"> </a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(String[] sorted, String x, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> (lo &gt; hi) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> m = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = x.compareTo(sorted[m]);</span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) <span class="keyword">return</span> binarySearch(sorted, x, lo, m - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) <span class="keyword">return</span> binarySearch(sorted, x, m + <span class="number">1</span>, hi)</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Cost model: $ C(N) = Math.floor( log_2^{N} )  + 1 $</p>
<h4><span id="handy-big-theta-properties">Handy Big Theta Properties</span><a href="#handy-big-theta-properties" class="header-anchor"> </a></h4><ul>
<li>the floor of f has same order of growth as f.</li>
<li>the ceiling of f has same order of growth as f.</li>
<li>logarithm base does not affect order of growth.</li>
</ul>
<p>Therefore:<br>$ C(N) \in \Theta(logN) $</p>
<h4><span id="log-time-is-really-fast">Log Time is Really Fast</span><a href="#log-time-is-really-fast" class="header-anchor"> </a></h4><p>In practice, logarithmic time algorithms have almost constant runtimes.</p>
<h4><span id="using-merge-to-speed-up-the-sorting-process">Using Merge to Speed Up the Sorting Process</span><a href="#using-merge-to-speed-up-the-sorting-process" class="header-anchor"> </a></h4><p>Merging can give us improvement over vanilla selection sort:</p>
<ul>
<li>Selection sort the left half: $ \Theta(N^2) $.</li>
<li>Selection sort the right half: $ \Theta(N^2) $.</li>
<li>Merge the results: $ \Theta(N) $</li>
</ul>
<p>Can do it recursively.</p>
<h4><span id="mergesort">Mergesort</span><a href="#mergesort" class="header-anchor"> </a></h4><p>Mergesort does merges all the way down (no selection sort):</p>
<ul>
<li>If array is of size 1, return.</li>
<li>Mergesort the left half.</li>
<li>Mergesort the right half.</li>
<li>Merge the results.</li>
</ul>
<p>Mergesort has worst case time $ \Theta(NlogN) $</p>
<h3><span id="omega-amortized-analysis">Omega, Amortized Analysis</span><a href="#omega-amortized-analysis" class="header-anchor"> </a></h3><h4><span id="why-big-o-is-useful">Why Big O is useful?</span><a href="#why-big-o-is-useful" class="header-anchor"> </a></h4><p>Big Theta expresses the exact order of as a function of the input size. However, if the runtime depends on more than just the size of the input, then we must qualify our statements into different cases before using Big Theta. Big O does away with this annoyance. Rather than describe both the best and worse case, we can simply describe the worst case using big O.</p>
<h4><span id="big-o-abuse">Big O Abuse</span><a href="#big-o-abuse" class="header-anchor"> </a></h4><p>Important: Big O does not mean “worst case”! Often abused to mean this.</p>
<p>Sometimes don’t know the exact runtime, so use O to give an upper bound.</p>
<h4><span id="big-omega">Big Omega</span><a href="#big-omega" class="header-anchor"> </a></h4><p>Whereas Big Theta can informally be thought of as something like “equals”, Big Omega can be thought of as “greater than or equal”.</p>
<p>Formal Definition:<br>$ R(N) \in \Omega(f(N)) $ means there exists positive constant $ k_1 $ such that:<br>$ k_1 \cdot f(N) \leq R(N) $ for all values of $ N $ greater than some $ N_0 $.</p>
<p>Two common use for Big Omega:</p>
<ul>
<li>Very careful proofs of Big Theta runtime.</li>
<li>Providing lower bounds for the hardness of a problem.</li>
</ul>
<p>Important：Big Omega does NOT mean best case.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/08/CS61B-Access-Control/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/08/CS61B-Access-Control/" itemprop="url">CS61B-Access Control</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-08T11:04:23+08:00">
                2020-03-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="access-control">Access Control</span><a href="#access-control" class="header-anchor"> </a></h2><h3><span id="access-control-with-inheritance-and-packages">Access Control with Inheritance and Packages</span><a href="#access-control-with-inheritance-and-packages" class="header-anchor"> </a></h3><p><strong>Protected</strong> modifier allows package-buddies and subclasses to use a class member (i.e. field/method/constructor).</p>
<ul>
<li>Outside cannot access.</li>
</ul>
<p><strong>Package private</strong><br>Using no modifier allows classes from the same package, but not subclasses, to access the member.</p>
<p><img src="/2020/03/08/CS61B-Access-Control/table.jpg" alt></p>
<h3><span id="the-default-package">The Default Package</span><a href="#the-default-package" class="header-anchor"> </a></h3><ul>
<li>As mentioned earlier, code without a package label is part of an unnamed package, a.k.a. the “default package”.</li>
</ul>
<p>Don’t have any access modifiers or package names?</p>
<ul>
<li>Everything is package-private.</li>
<li>Everthing is part of the same(unnamed) default package.</li>
</ul>
<h3><span id="access-is-based-only-on-static-types">Access is Based Only on Static Types</span><a href="#access-is-based-only-on-static-types" class="header-anchor"> </a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> universe;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BlackHole</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(Object x)</span></span>;  <span class="comment">// add might look package private, actually public, because it is an interface</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It is important that for interfaces, the default access for its method is actually public, and not package-private.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> universe;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreationUtils</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BlackHole <span class="title">hirsute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HasHair();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> universe;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HasHair</span> <span class="keyword">implements</span> <span class="title">BlackHole</span> </span>&#123;</span><br><span class="line">    Object[] items;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object o)</span> </span>&#123; ... &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> CreationUtils.hirsute;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">demoAccess</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        BlackHole b = hirsute();</span><br><span class="line">        b.add(<span class="string">"horse"</span>);</span><br><span class="line">        b.get(<span class="number">0</span>);</span><br><span class="line">        HasHair hb = (HasHair) b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>b.get(0): This line errors because b is of static type <em>BlackHole</em>, but the <em>BlackHole</em> interface does not define a <em>get</em> method. Even though you and I both know that b is dynamically a <em>HasHair</em>, and thus has the <em>get</em> method, the compiler bases its checks off the static type.</p>
</li>
<li><p>HasHair hb = (HasHair) b; notice that <em>HasHair</em> class is not a public class- it’s package-private. This means that <em>Client</em>, a class outside of the <em>universe</em> package, can’t see that the <em>HasHair</em> class exists.</p>
</li>
</ul>
<h3><span id="summary">Summary</span><a href="#summary" class="header-anchor"> </a></h3><p>Access Levels:</p>
<ul>
<li>Private declarations are parts of the implementation of a class that only that class needs.</li>
<li>Package-private declarations are parts of the implementation of a package that other members of the package will need to complete the implementation.</li>
<li>Protected declarations are things that subtypes might need, but subtype clients will not.</li>
<li>Public declarations are declarations of the specification for the package, i.e. what clients of the package can rely on. Once deployed, these should not change.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/08/CS61B-Packages/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/08/CS61B-Packages/" itemprop="url">CS61B-Packages</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-08T10:33:44+08:00">
                2020-03-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="packages-and-jar-files">Packages and JAR files</span><a href="#packages-and-jar-files" class="header-anchor"> </a></h2><h3><span id="packages">Packages</span><a href="#packages" class="header-anchor"> </a></h3><p>To address the fact that classes might share names:</p>
<ul>
<li>A package is a <strong>namespace</strong> that organizes classes and interfaces.</li>
<li>Naming convention: Package name starts with website address (backwards).</li>
</ul>
<p><strong>Creating a Package</strong><br>Two steps:</p>
<ul>
<li>At the top of every file in the package, put the package name.</li>
<li>Make sure that the file is stored in a folder with the appropriate folder name. For a package with name <em>ug.joshh.animal</em>, use folder <em>ug/joshh/animal</em>.</li>
</ul>
<p><strong>Using Packages</strong><br>As we saw in a previous lecture, to use a class from Package A in a class from Package B, we use the <strong>canonical name.</strong></p>
<p>For example, in the DogLauncher class, which is not part of the ug.joshh.animal package, can create a Dog using the syntax below.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ug.joshh.animal.Dog d = <span class="keyword">new</span> ug.joshh.animal.Dog(...);</span><br></pre></td></tr></table></figure><br>By using an <strong>import</strong> statement, we can use the <strong>simple name</strong> instead.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ug.joshh.animal.Dog;</span><br><span class="line">...</span><br><span class="line">Dog d = <span class="keyword">new</span> Dog(...);</span><br></pre></td></tr></table></figure><br><strong>The Default Package</strong><br>Any Java class without a package name at the top are part of the “default” package. </p>
<p>Idea: Ensure that we never have two classes with the same name. And you cannot import code from the default package.</p>
<h3><span id="jar-files">JAR Files</span><a href="#jar-files" class="header-anchor"> </a></h3><p>JAR files are just zip files.</p>
<ul>
<li>They do not keep your code safe.</li>
<li>Easy to unzip and transform back into .Java files.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/07/CS61B-Object-Methods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/07/CS61B-Object-Methods/" itemprop="url">CS61B-Object Methods</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-07T11:41:40+08:00">
                2020-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="object-methods"> Object Methods</span><a href="#object-methods" class="header-anchor"> </a></h2>
<p>All classes inherit from the overarching Object class. The methods that are inherited are as follows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">toString</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span></span><br><span class="line"><span class="function">Class &lt;?&gt; <span class="title">getClass</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">Objectclone</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">notify</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">notifyAll</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">wait</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">wait</span><span class="params">(<span class="keyword">long</span> timeout)</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">wait</span><span class="params">(<span class="keyword">long</span> timeout, <span class="keyword">int</span> nanos)</span></span></span><br></pre></td></tr></table></figure>
<h3><span id="tostring"> toString()</span><a href="#tostring" class="header-anchor"> </a></h3>
<p>The <em>toString()</em> method provides a string representation of an object.</p>
<ul>
<li><em>System.out.println(Object x)</em> calls <em>x.toString()</em><br>
– <em>println</em> calls <em>String.valueOf</em> which calls <em>toString</em></li>
<li>The implementation of <em>toString()</em> in <em>Object</em> is the name of the class, then an @ sign, then the memory location of the object.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String returnSB = <span class="keyword">new</span> StringBuilder(<span class="string">"&#123;"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        returnSB.append(items[i].toString()); <span class="comment">// returnSB.append(items[i]) also works because this implicitly happens</span></span><br><span class="line">        returnSB.append(<span class="string">", "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    returnSB.append(array[size - <span class="number">1</span>]);</span><br><span class="line">    returnSB.append(<span class="string">"&#125;"</span>);</span><br><span class="line">    <span class="keyword">return</span> returnSB.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Why not use String:</p>
<ul>
<li><em>String</em> is immutable. Adding even a single character to a string creates an entirely new string.</li>
</ul>
<h3><span id="equals"> equals()</span><a href="#equals" class="header-anchor"> </a></h3>
<p>As mentioned in an offhand manner previosly, <em>==</em> and <em>.equals()</em> behave differently.</p>
<ul>
<li>== compares the bits. For references, <em>==</em> means “referencing the same object”.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;Integer&gt; javaset = Set.of(<span class="number">5</span>, <span class="number">23</span>, <span class="number">42</span>);</span><br><span class="line">Set&lt;Integer&gt; javaset2 = Set.of(<span class="number">5</span>, <span class="number">23</span>, <span class="number">42</span>);</span><br><span class="line">System.out.println(javaset == javaset2);</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">To test equality in the sense we usually mean it, use:</span><br><span class="line">- *.equals* <span class="keyword">for</span> classes. Requires writing a *.equals* method <span class="keyword">for</span> your classes.</span><br><span class="line">- Default implementation of *.equals* use == (probably not what you want)</span><br><span class="line">- BTW: Use *Arrays.equal* or *Arrays.deepEquals* <span class="keyword">for</span> arrays.</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object other)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == other) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (other == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (other.getClass() != <span class="keyword">this</span>.getClass()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ArraySet&lt;T&gt; o = (ArraySet&lt;T&gt;) other;</span><br><span class="line">        <span class="keyword">if</span> (o.size() != <span class="keyword">this</span>.size()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (T item : <span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!o.contains(item)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4><span id="rules-for-equals-in-java"> Rules for Equals in Java</span><a href="#rules-for-equals-in-java" class="header-anchor"> </a></h4>
<ol>
<li><em>equals</em> must be an equivlence relation</li>
</ol>
<ul>
<li>reflexive: <em>x.equals(x)</em> is true.</li>
<li>symmetric: <em>x.equals(y)</em> if and only if <em>y.equals(x)</em>.</li>
<li>transitive: <em>x.equals(y)</em> and <em>y.equals(z)</em> implies <em>x.equals(z)</em>.</li>
</ul>
<ol start="2">
<li>
<p>It must take an Object argument, in order to override the <em>.equals</em> method.</p>
</li>
<li>
<p>It must be consistent if <em>x.equals(y)</em>, then as long as <em>x</em> and <em>y</em> remain unchanged: <em>x</em> must continue to equal <em>y</em>.</p>
</li>
<li>
<p>It is never true for null <em>x.equals(null)</em> must be false.</p>
</li>
</ol>
<p>0</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/07/CS61B-Iteration/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/07/CS61B-Iteration/" itemprop="url">CS61B-Iteration</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-07T10:41:13+08:00">
                2020-03-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2><span id="title-cs61b-iteration-date-2020-03-07t10-41-13-000z-tags-cs61b-categories-java"> title: CS61B-Iteration<br>
date: 2020-03-07T10:41:13.000Z<br>
tags: CS61b<br>
categories: Java</span><a href="#title-cs61b-iteration-date-2020-03-07t10-41-13-000z-tags-cs61b-categories-java" class="header-anchor"> </a></h2>
<h2><span id="iteration"> Iteration</span><a href="#iteration" class="header-anchor"> </a></h2>
<h3><span id="the-enhanced-for-loop"> The Enhanced For Loop</span><a href="#the-enhanced-for-loop" class="header-anchor"> </a></h3>
<p>Java allows us to iterate through Lists and Sets using a convenient shorthand syntax sometimes called the “foreach” or “enhanced for” loop.</p>
<h3><span id="how-iteration-really-works"> How iteration Really Works</span><a href="#how-iteration-really-works" class="header-anchor"> </a></h3>
<p>An alternate, uglier way to iterate through a List is to use the iterator() method.</p>
<p>Set.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<p>Ugly iteration:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;Integer&gt; javaset = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">...</span><br><span class="line">Iterator&lt;Integer&gt; seer = javaset.iterator();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (seer.hasNext()) &#123;</span><br><span class="line">    System.out.println(seer.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Nice iteration:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;Integer&gt; javaset = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> x : javaset) &#123;</span><br><span class="line">    System.out.println(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="the-secret-of-the-enhanced-for-loop"> The secret of the Enhanced For Loop</span><a href="#the-secret-of-the-enhanced-for-loop" class="header-anchor"> </a></h3>
<p>The secret: The code in nice form is just shorthand for the code in ugly form. For ugly form to compile, the compilers checks:</p>
<ul>
<li>Does the Set interface have an iterator() method?</li>
<li>Does the Iterator interface have next/hasNext() methods?</li>
</ul>
<h3><span id="supporting-ugly-iteration-in-arraysets"> Supporting Ugly Iteration in ArraySets</span><a href="#supporting-ugly-iteration-in-arraysets" class="header-anchor"> </a></h3>
<p>To support ugly iteration:</p>
<ul>
<li>Add an <em>iterator()</em> method to <em>ArraySet</em> that returns an <em>Iterator<t></t></em>.</li>
<li>The <em>Iterator<t></t></em> that we return should have a useful <em>hasNext()</em> and <em>next()</em> method.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// returns an iterator</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArraySetIterator();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ArraySetIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> wisPos;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArraySetIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        wizPos = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> wizPos &lt; size;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        T returnItem = array[wizPos++];</span><br><span class="line">        <span class="keyword">return</span> returnItem;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="for-each-iteration-and-arraysets"> For each iteration and Arraysets</span><a href="#for-each-iteration-and-arraysets" class="header-anchor"> </a></h3>
<p>To support the enhanced for loop, we need to make <em>ArraySet</em> implement the <em>Iterable</em> interface.<br>
That is to say, we need Java know that we have iterator() in out <em>ArraySet</em> class.</p>
<ul>
<li>There are also some default methods in <em>Iterable</em>, not shown.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterable</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">Iterator&lt;T&gt; <span class="title">iterator</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArraySet</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;T&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/07/CS61B-Exceptions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/07/CS61B-Exceptions/" itemprop="url">CS61B-Exceptions</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-07T10:33:01+08:00">
                2020-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="exceptions">Exceptions</span><a href="#exceptions" class="header-anchor"> </a></h2><p>Basic idea:</p>
<ul>
<li>When something goes really wrong, break the normal flow of control.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"You can't add null to an ArraySet"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="catching-exceptions">Catching Exceptions</span><a href="#catching-exceptions" class="header-anchor"> </a></h3>So far, thrown exceptions cause code to crash.</li>
<li>Can ‘catch’ exceptions instead, preventing program from crashing. Use keywords <strong>try</strong> and <strong>catch</strong> to break normal flow.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Dog d = <span class="keyword">new</span> Dog(<span class="string">"Lucy"</span>, <span class="string">"Retriever"</span>, <span class="number">80</span>);</span><br><span class="line">d.becomeAngry();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    d.receivePat();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    System.out.println(<span class="string">"Tried ot pat:"</span> + e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(d);</span><br></pre></td></tr></table></figure>
<p>May include corrective action in the catch.</p>
<h3><span id="the-philosophy-of-exceptions">The Philosophy Of Exceptions</span><a href="#the-philosophy-of-exceptions" class="header-anchor"> </a></h3><p>Allows you to keep error handling code seperate from ‘real’ code.</p>
<ul>
<li>Consider pseudocode that reads a file:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func readFile: &#123;</span><br><span class="line">    open the file;             <span class="comment">// what if the file doesn't exist</span></span><br><span class="line">    determine its size;</span><br><span class="line">    allocate that much memory;   <span class="comment">// what if there's not enough memory</span></span><br><span class="line">    read the file into memory;   <span class="comment">// what happens if reading fails?</span></span><br><span class="line">    close the file;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
One naive approach:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">func readFile: &#123;</span><br><span class="line">    open the file;</span><br><span class="line">    <span class="keyword">if</span> (theFileIsOpen) &#123;</span><br><span class="line">        determine the size;</span><br><span class="line">        <span class="keyword">if</span> (gotTheFileLength) &#123;</span><br><span class="line">            allocate that much memory;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> error(<span class="string">"fileLengthError"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (gotEnoughMemory) &#123;</span><br><span class="line">            read the file into memory;</span><br><span class="line">            <span class="keyword">if</span> (readFailed) &#123;</span><br><span class="line">                <span class="keyword">return</span> error(<span class="string">"readError"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            ...</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> error(<span class="string">"memeryError"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> error(<span class="string">"fileOpenError"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
Instead, we can do like below:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">func readFile: &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        open the file;</span><br><span class="line">        determine its size;</span><br><span class="line">        allocate that much memory;</span><br><span class="line">        read the file into memory;</span><br><span class="line">        close the file;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (fileOpenFailed) &#123;</span><br><span class="line">        doSomething;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (sizeDeterminationFailed) &#123;</span><br><span class="line">        doSomething;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (memoryAllocationFailed) &#123;</span><br><span class="line">        doSomething;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (readFailed) &#123;</span><br><span class="line">        doSomething;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (fileCloseFiled) &#123;</span><br><span class="line">        doSomething;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
When an exception is thrown, it descends the call stack.</li>
<li>If exceptions reaches the bottom of the stack, the program crashes and Java provides a message for the user.</li>
</ul>
<h3><span id="checked-vs-unchecked-exceptions">Checked vs Unchecked Exceptions</span><a href="#checked-vs-unchecked-exceptions" class="header-anchor"> </a></h3><p>Occasionally, you’ll find that your code won’t even compile, for the mysterious reason that an exception “must be caught or declared to be thrown”.</p>
<ul>
<li>The basic idea: Some exceptions are considered so disgusting by the compiler that you MUST handle them somehow.</li>
<li>We call these “checked” exceptions.</li>
</ul>
<p>By contrast unchecked exceptions have no such restrictions.</p>
<p><img src="/2020/03/07/CS61B-Exceptions/pic.jpg" alt></p>
<h4><span id="checking-exceptions">Checking Exceptions</span><a href="#checking-exceptions" class="header-anchor"> </a></h4><p>Compiler requires that all checked exceptions be <strong>caught</strong> or <strong>specified</strong>.<br>Two ways to satisfy compiler:</p>
<ul>
<li>Catch: Use a catch block after potential exception.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">gulgate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (today == <span class="string">"Thursday"</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">"hi"</span>);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        System.out.println(<span class="string">"psych!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Specify method as dangerous with <strong>throws</strong> keyword.<br>— Defers to someone else to handle exception.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">gulgate</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    ... <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">"hi"</span>); ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If a method uses a ‘dangerous’ method (i.e. might throw a checked exception), it becomes dangerous itself.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Eagle.gulgate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>So we have to:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        gulgate();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        System.out.println(<span class="string">"Averted!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Also we can:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        gulgate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/07/CS61B-Lists-Sets-ArraySet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/07/CS61B-Lists-Sets-ArraySet/" itemprop="url">CS61B-Lists,Sets,ArraySet</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-07T10:10:40+08:00">
                2020-03-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3><span id="list-in-java"> List in Java</span><a href="#list-in-java" class="header-anchor"> </a></h3>
<p>We built a list from scratch, but Java provides a built-in <em>List</em> interface and several implementations, e.g. <em>ArrayList</em>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List61B&lt;Integer&gt; L = <span class="keyword">new</span> AList&lt;&gt;();</span><br><span class="line">L.addLast(<span class="number">5</span>);</span><br><span class="line">L.addLast(<span class="number">10</span>);</span><br><span class="line">L.addLast(<span class="number">15</span>);</span><br><span class="line">L.print();</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.util.List&lt;Integer&gt; L = <span class="keyword">new</span> java.util.ArrayList&lt;&gt;();</span><br><span class="line">L.add(<span class="number">5</span>);</span><br><span class="line">L.add(<span class="number">10</span>);</span><br><span class="line">L.add(<span class="number">15</span>);</span><br><span class="line">System.out.println(L);</span><br></pre></td></tr></table></figure>
<h3><span id="sets-in-java"> Sets in Java</span><a href="#sets-in-java" class="header-anchor"> </a></h3>
<p>Stores a set of values with no duplicates. Has no sense of order.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; S = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">S.add(<span class="string">"Tokyo"</span>);</span><br><span class="line">S.add(<span class="string">"Beijing"</span>);</span><br><span class="line">S.add(<span class="string">"Lagos"</span>);</span><br><span class="line">S.add(<span class="string">"Sao Paulo"</span>);</span><br><span class="line">System.out.println(S.contains(<span class="string">"Tokyo"</span>));</span><br></pre></td></tr></table></figure>
<p><strong>ArraySet Implementation</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArraySet</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line">    <span class="keyword">private</span> (T[]) array;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArraySet</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">        array = (T[]) <span class="keyword">new</span> Object[<span class="number">100</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!contains(value)) &#123;</span><br><span class="line">            array[size++] = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (value.equals(array[i])) &#123; <span class="keyword">return</span> <span class="keyword">true</span>; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/06/CS61B-Industrial-Strength-Syntax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/06/CS61B-Industrial-Strength-Syntax/" itemprop="url">CS61B-Industrial Strength Syntax</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-06T01:32:06+08:00">
                2020-03-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="automatic-conversions"> Automatic Conversions</span><a href="#automatic-conversions" class="header-anchor"> </a></h2>
<h2><span id="autoboxing"> Autoboxing</span><a href="#autoboxing" class="header-anchor"> </a></h2>
<h4><span id="primitives-cannot-be-used-as-actual-type-arguments"> Primitives Cannot Be Used as Actual Type Arguments</span><a href="#primitives-cannot-be-used-as-actual-type-arguments" class="header-anchor"> </a></h4>
<p>We cannot use primitive type as actual type arguments.</p>
<ul>
<li>Code below causes a compile time error.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;<span class="keyword">int</span>&gt; L = <span class="keyword">new</span> ArrayList&lt;<span class="keyword">int</span>&gt;();</span><br></pre></td></tr></table></figure>
<h4><span id="reference-types"> Reference Types</span><a href="#reference-types" class="header-anchor"> </a></h4>
<p>Reminder: Java has 8 primitive types. All other types are reference types.</p>
<p>For each primitive type, there is a corresponding reference type called a wrapper class.</p>
<ul>
<li>For example, boolean’s wrapper class is Boolean.</li>
</ul>
<h4><span id="reference-types-as-actual-type-arguments"> Reference Types as Actual Type Arguments</span><a href="#reference-types-as-actual-type-arguments" class="header-anchor"> </a></h4>
<p>Solution: Use wrapper type as actual type parameter instead of primitive type.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Integer&gt; L = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">L.add(<span class="keyword">new</span> Integer(<span class="number">5</span>));</span><br><span class="line">L.add(<span class="keyword">new</span> Integer(<span class="number">6</span>));</span><br><span class="line"><span class="keyword">int</span> first = L.get(<span class="number">0</span>).valueOf();</span><br></pre></td></tr></table></figure>
<h4><span id="autoboxing"> Autoboxing</span><a href="#autoboxing" class="header-anchor"> </a></h4>
<p>Autoboxing (auto-unboxing): Implicit conversions between wrapper/primitives.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Integer&gt; L = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">L.add(<span class="number">5</span>);</span><br><span class="line">L.add(<span class="number">6</span>);</span><br><span class="line"><span class="keyword">int</span> first = L.get(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>Code above works even though we’re passing an int into an Integer parameter, and assigning a return value of type Integer to an int.</p>
<p>Wrapper types and primitives can be used almost interchangeably.</p>
<ul>
<li>If Java code expects a wrapper type and gets a primitive, it is autoboxed.</li>
<li>If the code expects a primitive and gets a wrapper, it is unboxed.</li>
</ul>
<p>Some notes:</p>
<ul>
<li>Arrays are never autoboxed/unboxed, e.g. an Integer[] cannot be used in place of int[] (or vice versa).</li>
<li>Autoboxing / unboxing incurs a measurable perfomance impact. That is, code that relies on autoboxing and unboxing will be slower than code that eschews such automatic conversions.</li>
<li>Wrapper types use MUCH more memory than primitive types.</li>
</ul>
<p>Some exercise:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bleepblorp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Integer x = <span class="keyword">new</span> Integer(<span class="number">5</span>);</span><br><span class="line">    System.out.println(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Assuming:</p>
<ul>
<li>Addresses are 64 bits.</li>
<li>ints are 32 bits.</li>
<li>All Java objects take 64 bits + their fields.</li>
</ul>
<p>How much total memory is used by bleepblorp to store its local variables?</p>
<p>64 + 64 + 32 = 160 bits</p>
<h3><span id="primitive-widening"> Primitive Widening</span><a href="#primitive-widening" class="header-anchor"> </a></h3>
<p>A similar thing happens when moving from a primitive type with a narrower range to a wider range.</p>
<ul>
<li>In this case, we say the value is “widened”.</li>
<li>Code below is fine since double is wider than int.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">blahDouble</span><span class="params">(<span class="keyword">double</span> x)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"double"</span> + x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">20</span>;</span><br><span class="line">blahDouble(x);</span><br></pre></td></tr></table></figure>
<p>To move from a wider type to a narrower type, must use casting:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">blahInt</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"int:"</span> + x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> x = <span class="number">20</span>;</span><br><span class="line">blahInt((<span class="keyword">int</span>) x);</span><br></pre></td></tr></table></figure>
<h3><span id="immutability"> Immutability</span><a href="#immutability" class="header-anchor"> </a></h3>
<p>An immutable data type is one for which an instance cannot change in any obsevable way after instantiation.</p>
<p>Examples:</p>
<ul>
<li>Mutable: ArrayDeque, Planet.</li>
<li>Immutable: Integer, String, Date.</li>
</ul>
<p>The <strong>final</strong> keyword will help the compiler ensure immutability.</p>
<ul>
<li>final variable means you will assign a value once (either in constructor of class or in initializer).</li>
<li>Not necessary to have final to be immutable (e.g. Dog with private variables).</li>
</ul>
<p><strong>Immutability</strong><br>
Advantage: Less to think about: Avoid bugs and makes debugging easier.</p>
<ul>
<li>Analogy: Immutable classes have some buttons you can press / windows you can look inside. Results are ALWAYS the same, no matter what.</li>
</ul>
<p>Disadvantage: Must create a new object anytime anything changes.</p>
<p>Warning: Declaring a reference as <strong>final</strong> does not make object immutable.</p>
<ul>
<li>Example:</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> ArrayDeque&lt;String&gt; d = <span class="keyword">new</span> ArrayDeque&lt;String&gt;();</span><br></pre></td></tr></table></figure>
<ul>
<li>The d variable can never change, but the referenced deque can.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/05/CS61B-Midterm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Starfly">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Starfly's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/05/CS61B-Midterm/" itemprop="url">CS61B-Midterm</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-05T01:15:29+08:00">
                2020-03-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithms/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithms</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="1-static"> 1. Static</span><a href="#1-static" class="header-anchor"> </a></h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="keyword">void</span> <span class="title">fillMany</span><span class="params">(String[] d)</span> </span>&#123;</span><br><span class="line">    System.arraycopy(Data.rs, <span class="number">0</span>, d, <span class="number">0</span>, d.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fillOne</span><span class="params">(String d)</span> </span>&#123; d = Data.rs[<span class="number">0</span>]; &#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String a = <span class="string">"alice"</span>;</span><br><span class="line">    String b = <span class="string">"bob"</span>;</span><br><span class="line">    String c = <span class="string">"carol"</span>;</span><br><span class="line">    String d = <span class="string">"dan"</span>;</span><br><span class="line">    String[][] twod = &#123;&#123;a, b&#125;, &#123;c, d&#125;&#125;;</span><br><span class="line"></span><br><span class="line">    Data.rs = <span class="keyword">new</span> String[]&#123;<span class="string">"fritz"</span>, <span class="string">"gritz"</span>&#125;;</span><br><span class="line">    String[] X = twod[<span class="number">0</span>];</span><br><span class="line">    printStringArray(X);       <span class="comment">// alice bob</span></span><br><span class="line">    fillOne(X[<span class="number">0</span>]);</span><br><span class="line">    printStringArray(X);       <span class="comment">// alice bob</span></span><br><span class="line">    fillMany(X);</span><br><span class="line">    printStringArray(X);       <span class="comment">// fritz gritz</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/03/05/CS61B-Midterm/p1.jpg" alt><br>
Notice that in function fillOne, we just assign the address of <em>fritz</em> to variable d, we don’t change anything in X and twod.</p>
<h2><span id="3-keygate"> 3. KeyGate</span><a href="#3-keygate" class="header-anchor"> </a></h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fingerprint</span> </span>&#123;...&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Key</span> </span>&#123;...&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> class SkeletonKey <span class="title">extends</span><span class="params">(Key)</span> </span>&#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StandardBox</span> </span>&#123; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">(Key k)</span> </span>&#123;...&#125; &#125; <span class="comment">// UK</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BioBox</span> <span class="keyword">extends</span> <span class="title">StandardBox</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">(SteletonKey sk)</span> </span>&#123;...&#125;    <span class="comment">// USK</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">(Fingerprint f)</span> </span>&#123;...&#125;     <span class="comment">// UF</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doStuff</span><span class="params">(Key k, SkeletonKey sk, Fingerprint f)</span> </span>&#123;</span><br><span class="line">    StandardBox sb = <span class="keyword">new</span> StandardBox();</span><br><span class="line">    StandardBox sbbb = <span class="keyword">new</span> BioBox();</span><br><span class="line">    BioBox bb = <span class="keyword">new</span> BioBox();</span><br><span class="line"></span><br><span class="line">    sb.unlock(k);               <span class="comment">// UK      </span></span><br><span class="line">    sbbb.unlock(k);             <span class="comment">// UK </span></span><br><span class="line">    bb.unlock(k);               <span class="comment">// UK</span></span><br><span class="line"></span><br><span class="line">    sb.unlock(sk);              <span class="comment">// UK</span></span><br><span class="line">    sbbb.unlock(sk);            <span class="comment">// UK</span></span><br><span class="line">    bb.unlock(sk);              <span class="comment">// USK</span></span><br><span class="line"></span><br><span class="line">    sb.unlock(f);               <span class="comment">// Compile Error</span></span><br><span class="line">    sbbb.unlock(f);             <span class="comment">// Compile Error</span></span><br><span class="line">    bb.unlock(f);               <span class="comment">// UF</span></span><br><span class="line"></span><br><span class="line">    bb = (BioBox) sbbb;         </span><br><span class="line">    ((StandardBox) bb).unlock(sk);    <span class="comment">// UK</span></span><br><span class="line">    ((StandardBox) sbbb).unlock(sk);  <span class="comment">// UK</span></span><br><span class="line">    ((BioBox) sb).unlock(sk);         <span class="comment">// Runtime Error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Actually, no overriding in this problem. They are all overloading.</li>
<li>When compiling, compiler will look at the type of the arguments given. And choose the methods that suitable(or compatible) for the arguments. Here, in the fifth question, sbbb has the type <em>StandardBox</em>, and <em>SkeletonKey</em> is-a <em>Key</em>, so we choose the <em>UK</em> methond.</li>
<li>In the last question, <em>sb</em>’s dynamic type is <em>StandardBox</em>, so we get a runtime error.</li>
</ul>
<h2><span id="4-sans"> 4. Sans</span><a href="#4-sans" class="header-anchor"> </a></h2>
<p>(b)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/** Non-destructively creates a copy of x that contains no y. */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IntList <span class="title">ilsans</span><span class="params">(IntList x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x.first == y) &#123;</span><br><span class="line">        <span class="keyword">return</span> ilsans(x.rest, y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> IntList(x.first, ilsans(x.rest, y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>©</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Destructively mutates first and/or rest of x that contains no y. You may not use new. */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IntList <span class="title">dilsans</span><span class="params">(IntList x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    x.rest = dilsans(x.rest, y);</span><br><span class="line">    <span class="keyword">if</span> (x.first == y) &#123;</span><br><span class="line">        <span class="keyword">return</span> x.rest; <span class="comment">// We don't really care about x, just need recursive result.</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;         <span class="comment">// We do care about x because we need to return x. But also need to recurse.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="5-a-needle-in-arraystack-purge"> 5. A Needle in ArrayStack: purge</span><a href="#5-a-needle-in-arraystack-purge" class="header-anchor"> </a></h2>
<p>(b)<br>
Suppose we want to add a <strong>default method</strong> purge(Item x) <strong>to the Stack interface</strong> that eliminates all instances of x from the Stack, but leaves the stack otherwise unchanged.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Stack</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(Item x)</span></span>;</span><br><span class="line">    <span class="function">Item <span class="title">pop</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">purge</span><span class="params">(Item x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size() == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Item top = pop();</span><br><span class="line">        purge(x);</span><br><span class="line">        <span class="keyword">if</span> (!x.equals(top)) &#123;</span><br><span class="line">            push(top);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Starfly</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">42</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Starfly</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.staticfile.org/MathJax/MathJax-2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
